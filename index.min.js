import{initializeApp}from"https://www.gstatic.com/firebasejs/9.0.2/firebase-app.js";import{getStorage,ref as storageRef,uploadBytes,getDownloadURL}from"https://www.gstatic.com/firebasejs/9.0.2/firebase-storage.js";import{getDatabase,ref,remove,push,get,update,onValue,child,set}from"https://www.gstatic.com/firebasejs/9.0.2/firebase-database.js";import{getAuth,onAuthStateChanged,sendPasswordResetEmail,sendEmailVerification,createUserWithEmailAndPassword,signInWithEmailAndPassword,GoogleAuthProvider,signInWithPopup}from"https://www.gstatic.com/firebasejs/9.0.2/firebase-auth.js";const firebaseConfig={apiKey:"AIzaSyAisBpwnYt14S4NiLbcOiAhdINsqwSYJiI",authDomain:"aleveltv-75194.firebaseapp.com",databaseURL:"https://aleveltv-75194-default-rtdb.firebaseio.com",projectId:"aleveltv-75194",storageBucket:"aleveltv-75194.appspot.com",messagingSenderId:"440342498130",appId:"1:440342498130:web:20e2eb670b1cb2c39cc88b",measurementId:"G-VTR1KGT4CW"},app=initializeApp(firebaseConfig),database=getDatabase(app),auth=getAuth(app);function closeWelcomePopup(){const e=document.getElementById("overlay"),t=document.getElementById("welcomePopup");e.style.display="none",t.style.display="none"}function subscribeToFirebase(){var e=document.getElementById("email").value;document.getElementById("subscribeButton").style.display="none",document.getElementById("spinner").style.display="inline-block";const t=ref(database,"subscribedEmails");push(t,e).then((()=>{document.getElementById("spinner").style.display="none",document.getElementById("thankYouMessage").style.display="block",replaceContentWithSuccessMessage(),setTimeout((()=>{closeWelcomePopup()}),1e3)})).catch((e=>{console.error("Error submitting email to Firebase:",e),document.getElementById("spinner").style.display="none",alert("There was an error subscribing. Please try again.")}))}function replaceContentWithSuccessMessage(){document.getElementById("subscriptionContent").innerHTML=""}function createCart(){const e=document.createElement("div");e.id="cart",e.classList.add("cart");const t=document.createElement("span");t.id="cart-count";const n=document.createElement("div");n.id="cart-buttons";const a=document.createElement("button");a.id="open-cart-btn",a.innerHTML='<i class="fa fa-shopping-cart"></i>';const s=document.createElement("button");s.id="close-cart-btn",s.innerHTML='<i class="fa fa-times"></i>',n.appendChild(a),n.appendChild(s);const c=document.createElement("div");c.id="cart-content";const o=document.createElement("div");o.id="cart-items";const l=document.createElement("p");l.id="total-price";const d=document.createElement("button");d.id="checkout-btn",d.innerHTML='<i class="fas fa-shopping-cart"></i> Checkout';const i=document.createElement("div");i.classList.add("button-and-total-container"),c.appendChild(o),c.appendChild(i),i.appendChild(l),i.appendChild(d),e.appendChild(t),e.appendChild(n),e.appendChild(c);document.getElementById("cart-container").appendChild(e),isCartEmpty()&&(e.style.display="none")}function isCartEmpty(){return 0===document.getElementById("cart-items").children.length}function showNoPurchaseMessage(){const e=document.getElementById("message-container");e.innerText="No purchase history found!",e.style.display="block",setTimeout((()=>{e.style.display="none"}),3e3)}function displayReceiptsPopup(e){const t=document.createElement("div");t.classList.add("popup-container");const n=document.createElement("button");n.innerText="Close",n.classList.add("close-button"),n.addEventListener("click",(()=>{t.style.animation="fadeOut 0.5s",setTimeout((()=>{document.body.removeChild(t)}),500)}));const a=document.createElement("div");a.classList.add("receipt-details-container");const s=document.createElement("label");s.innerText="Filter by Date";const c=document.createElement("input");c.type="date",c.placeholder="Filter by Date",c.addEventListener("input",r);const o=document.createElement("button");o.innerText="Clear",o.classList.add("clear-button"),o.addEventListener("click",(function(){c.value="",r({target:{value:""}})}));const l=document.createElement("label");l.innerText="Search by Order ID";const d=document.createElement("input");d.type="text",d.placeholder="Search by Order ID",d.addEventListener("input",p);const i=document.createElement("div");function r(e){const t=e.target.value;document.querySelectorAll(".receipt-container").forEach((e=>{e.style.display="none"}));const n=document.querySelector(".receipt-details-container");let a=n.querySelector(".no-orders-message-container");if(!a){a=document.createElement("div"),a.classList.add("no-orders-message-container"),n.appendChild(a);const e=document.createElement("img");e.src="img/nothing found.png",e.alt="No Orders Image",e.classList.add("no-orders-image"),a.appendChild(e);const t=document.createElement("p");t.classList.add("no-orders-message"),a.appendChild(t)}a.style.display="none",a.querySelector(".no-orders-message").textContent="";let s=!1;document.querySelectorAll(".receipt-container").forEach((e=>{const n=e.querySelector(".receipt-info:nth-child(2)").textContent.split(": ")[1],a=new Date(n);if(!isNaN(a.getTime())){a.toLocaleDateString("en-US",{month:"numeric",day:"numeric",year:"numeric"});const n=new Date(t);t&&a.toISOString().split("T")[0]!==n.toISOString().split("T")[0]?e.style.display="none":(e.style.display="block",s=!0)}})),a.style.display=s?"none":"block",s||(a.querySelector(".no-orders-message").textContent="No orders found on this date."),c.addEventListener("input",r),d.addEventListener("input",p)}function p(e){const t=e.target.value.toLowerCase();document.querySelectorAll(".receipt-container").forEach((e=>{e.style.display="none"}));const n=document.querySelector(".receipt-details-container");let a=n.querySelector(".search-results-container");if(!a){a=document.createElement("div"),a.classList.add("search-results-container"),n.appendChild(a);const e=document.createElement("img");e.src="img/nothing found.png",e.alt="No Orders Image",e.classList.add("no-orders-image"),a.appendChild(e);const t=document.createElement("p");t.classList.add("no-orders-message"),a.appendChild(t)}a.style.display="none";const s=a.querySelector(".no-orders-message");if(s){s.textContent="";let e=!1;document.querySelectorAll(".receipt-container").forEach((n=>{const a=n.querySelector(".receipt-info:first-child").textContent;t&&!a.toLowerCase().includes(`${t}`)?n.style.display="none":(n.style.display="block",e=!0)})),a.style.display=e?"none":"block",e||(s.textContent="No orders found for the specified order ID.")}c.addEventListener("input",r),d.addEventListener("input",p)}i.classList.add("filter-container"),i.appendChild(l),i.appendChild(d),i.appendChild(s),i.appendChild(c),i.appendChild(o),t.appendChild(i),t.style.animation="fadeIn 0.5s",c.addEventListener("input",r),d.addEventListener("input",p);const m=Object.keys(e).sort(((t,n)=>e[n].orderId-e[t].orderId));m.reverse();for(const t of m){const n=e[t],s=document.createElement("div");s.classList.add("receipt-container");const c=`\n    <p class="receipt-info"><span>Order ID:  </span>${n.orderId}</p>\n    <p class="receipt-info"><span>Order Date:  </span>${n.orderDate}</p>\n    <p class="receipt-info"><span>Delivery Place: </span>${n.deliveryPlace}</p>\n    <p class="receipt-info"><span>Means of Transport:  </span>${n.meansOfTransport}</p>\n    <p class="receipt-info"><span>Payment Option:  </span>${n.selectedPaymentOption}</p>\n    <p class="receipt-info"><span>Order Time:  </span>${n.orderTime}</p>\n    \x3c!-- Replace the existing order summary element with this table --\x3e\n    <table class="order-summary-table">\n      <caption>Order Summary</caption>\n      <thead>\n        <tr>\n          <th>Pdt</th>\n          <th>Qty</th>\n          <th>Price</th>\n          <th>Total</th>\n          <th>WholeSale</th>\n        </tr>\n      </thead>\n      <tbody>\n        \x3c!-- Iterate through each item in the order summary --\x3e\n        ${n.orderSummary.map((e=>`\n          <tr>\n            <td>${e.productName}</td>\n            <td>${e.quantity}</td>\n            <td>UGX ${e.price.toFixed(2)}</td>\n            <td>UGX ${e.total.toFixed(2)}</td>\n            <td>${e.isWholesale}</td>\n          </tr>\n        `)).join("")}\n      </tbody>\n    </table>\n    <p class="receipt-info">Cart Total: UGX ${n.cartTotal.toFixed(2)}</p>\n  `;s.innerHTML=c,a.appendChild(s)}t.appendChild(n),t.appendChild(i),t.appendChild(a),document.body.appendChild(t),t.style.animation="fadeIn 0.5s"}document.addEventListener("DOMContentLoaded",(function(){if(!localStorage.getItem("hasShownPopup")){const e=document.getElementById("overlay"),t=document.getElementById("welcomePopup");e.style.display="block",t.style.display="block",setTimeout((()=>{t.classList.remove("fade-in")}),1e3),localStorage.setItem("hasShownPopup",!0)}})),window.addEventListener("popstate",closeWelcomePopup),document.getElementById("subscribeButton").addEventListener("click",subscribeToFirebase),document.getElementById("closeButton").addEventListener("click",closeWelcomePopup),document.addEventListener("DOMContentLoaded",(()=>{function e(){document.getElementById("popup").style.display="none",document.getElementById("overlay6").style.display="none",document.body.classList.remove("no-scroll")}function t(){document.getElementById("overlay2");auth.signOut().then((()=>{!function(){const e=document.getElementById("message-container");e.innerText="User Logged out!",e.style.display="block",setTimeout((()=>{e.style.display="none"}),3e3)}(),e(),n(),location.reload()})).catch((e=>{console.error("Error logging out:",e.message)}))}function n(){const e=document.getElementById("confirmationPopup"),a=document.getElementById("overlay3");e.style.display="none",a.style.display="none";const s=document.getElementById("confirmYesBtn"),c=document.getElementById("confirmNoBtn");s.removeEventListener("click",t),c.removeEventListener("click",n)}createCart(),window.addEventListener("scroll",(()=>{const e=document.getElementById("cart");(window.pageYOffset||document.documentElement.scrollTop)>200?(e.style.display="block",setTimeout((()=>{e.style.opacity="1"}),10)):(e.style.opacity="0",setTimeout((()=>{e.style.display="none"}),300))})),onAuthStateChanged(auth,(async e=>{e||console.log("User signed out")})),document.getElementById("closePopupBtn").addEventListener("click",(function(){e()})),window.addEventListener("popstate",e),document.getElementById("logoutBtn").addEventListener("click",(function(){!function(){const e=document.getElementById("confirmationPopup"),a=document.getElementById("overlay3");e.style.display="block",a.style.display="block";const s=document.getElementById("confirmYesBtn"),c=document.getElementById("confirmNoBtn");s.addEventListener("click",t),c.addEventListener("click",n)}()})),window.addEventListener("popstate",n),document.getElementById("accountLink").addEventListener("click",(async function(e){e.preventDefault(),await async function(){const e=auth.currentUser;if(!e){console.log("User not authenticated");const e=document.getElementById("messageContainer"),t=document.getElementById("messageContent"),n=document.getElementById("overlay6");return t.innerHTML='\n          <div id="companyLogo" class="company-logo">\n              <img src="bibo-phone-spare-world-logo-zip-file/png/logo-black.png" alt="Company Logo">\n          </div>\n          <p>You are not signed in. Please sign in to access your account.</p>\n          <button id="loginButton" class="login-button">\n              <i class="fa fa-sign-in"></i> Login\n          </button>\n      ',e.classList.add("fade-in"),e.style.display="flex",n.style.display="block",void document.getElementById("loginButton").addEventListener("click",(function(){window.location.href="login.html"}))}document.getElementById("overlay6").style.display="block";const t=document.getElementById("loader");t.style.display="block";const n=JSON.parse(localStorage.getItem("userDetails")),a=document.getElementById("popup");a.style.display="block",a.classList.add("fade-in");const s=document.getElementById("userDetails");s.innerHTML=`\n      <div class="user-info">\n          <p class="accountt"> Account Details </p>\n          <p>Email: ${n.email}</p>\n      </div>\n  `;const c=n.uid,o=ref(database,"users/"+c);try{const n=await get(o);if(n.exists()){const a=n.val();s.innerHTML+=`\n              <table class="additional-info-table">\n                  <tr>\n                      <th>First Name</th>\n                      <td>${a.firstName||"N/A"}</td>\n                  </tr>\n                  <tr>\n                      <th>Last Name</th>\n                      <td>${a.lastName||"N/A"}</td>\n                  </tr>\n                  <tr>\n                      <th>Telephone</th>\n                      <td>${a.telephone||"N/A"}</td>\n                  </tr>\n                  <tr>\n                      <th>Date of Birth</th>\n                      <td>${a.dob||"N/A"}</td>\n                  </tr>\n              </table>\n          `,t.style.display="none";const c=document.getElementById("profilePicture");e.photoURL?(c.src=e.photoURL,c.style.display="block"):(c.src="img/profile.png",c.style.display="block")}else s.innerHTML+="<p>No user details found.</p>"}catch(e){console.error("Error fetching user details from Firebase:",e.message)}document.getElementById("popup").style.display="block",document.body.classList.add("no-scroll")}()})),window.addEventListener("popstate",(function(e){document.getElementById("closePopupBtn").addEventListener("click",(function(){document.getElementById("overlay").style.display="none";const e=document.getElementById("popup");e.style.display="none",e.classList.remove("fade-in"),document.body.classList.remove("no-scroll")}))}));document.getElementById("checkout-btn").addEventListener("click",(()=>{const e=document.getElementsByClassName("cart-item"),t=[];for(let n=0;n<e.length;n++){const a=e[n],s=a.querySelector(".product-details h5").innerText,c=parseFloat(a.querySelector(".product-details h4").dataset.price),o=parseInt(a.querySelector(".quantity-input").value),l=o*c,d=a.querySelector(".toggle-switch").checked;t.push({productName:s,price:c,quantity:o,total:l,isWholesale:d})}const n=t.reduce(((e,t)=>e+t.total),0),a=document.createElement("div");a.classList.add("popup-content");const s=document.createElement("h4");s.innerText="Order Summary",a.appendChild(s);const c=document.createElement("table");c.classList.add("order-table");const o=document.createElement("tr");o.innerHTML="\n    <th>Product</th>\n    <th>Price</th>\n    <th>Qty</th>\n    <th>Total</th>\n    <th>Wholesale</th>\n  ",c.appendChild(o);for(let e=0;e<t.length;e++){const{productName:n,price:a,quantity:s,total:o,isWholesale:l}=t[e],d=document.createElement("tr");d.innerHTML=`\n      <td>${n}</td>\n      <td>UGX ${a}</td>\n      <td>${s}</td>\n      <td>UGX ${o.toFixed(2)}</td>\n      <td>${l?"Yes":"No"}</td>\n    `,c.appendChild(d)}a.appendChild(c);const l=document.createElement("h4");l.innerText=`Total: UGX ${n.toFixed(2)}`,l.style.fontSize="18px",l.style.marginTop="10px",l.style.color="#333",a.appendChild(l);const d=document.createElement("div");d.classList.add("popup-container"),d.appendChild(a),document.body.appendChild(d);const i=document.createElement("button");function r(){i.addEventListener("click",(()=>{d.style.display="none"}))}i.classList.add("close-button"),i.innerHTML="&times; Close",r(),window.addEventListener("popstate",(function(e){r()})),d.appendChild(i);const p=document.createElement("div");p.classList.add("customer-details");const m=document.createElement("div");m.classList.add("payment-options");const u=document.createElement("h4");u.innerText="Payment Options",m.appendChild(u);const y=document.createElement("p");y.innerText="Click the payment option to copy the receiver details. After Placing your Order, track it in your account and use it's order ID as reason while making the payment. Thank You! ",y.classList.add("payment-options-note"),m.appendChild(y);["Mobile Money"].forEach((e=>{const t=document.createElement("div");t.classList.add("payment-option-container");const n=document.createElement("div");n.classList.add("payment-option"),n.innerHTML=`\n    <input type="radio" name="payment-option" id="${e.toLowerCase()}" value="${e.toLowerCase()}">\n    <label for="${e.toLowerCase()}">${e}</label>\n  `;const a=document.createElement("div");a.classList.add("details-section");const s=document.createElement("i");s.classList.add("fas","fa-copy","copy-icon"),a.appendChild(s);const c=document.createElement("span");c.innerText="Copy",a.appendChild(c),n.appendChild(a),n.addEventListener("click",(()=>{const e=document.querySelector('input[name="payment-option"]:checked').value;if(e&&g[e]){const t=g[e].split("\n");if(t.length>=2){!function(e){const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}(t[1].split(": ")[1]);const e=document.createElement("div");e.className="copied-message",e.textContent="Payment Number Copied to clipboard",document.body.appendChild(e),setTimeout((()=>{e.classList.add("show")}),100),setTimeout((()=>{e.classList.remove("show"),setTimeout((()=>{document.body.removeChild(e)}),500)}),2e3)}else console.error("Invalid receiver details format for the selected payment option.")}else console.error("Receiver details not found for the selected payment option.")})),t.appendChild(n),m.appendChild(t)})),a.appendChild(m);const h=document.createElement("div");h.classList.add("receiver-details");const g={"mobile money":"Receiver: Daisy Nakitto\nMTN Number: 0774 050 825"};function E(){h.innerHTML="";const e=document.querySelector('input[name="payment-option"]:checked').value,t=document.createElement("p");t.innerText=g[e],h.appendChild(t)}document.querySelectorAll('input[name="payment-option"]').forEach((e=>{e.addEventListener("change",E)})),m.appendChild(h);const f=document.createElement("h4");f.innerText="Delivery details.",a.appendChild(f);const L=document.createElement("p");L.innerText="Please note that transport and delivery costs are on the side of the customer.",L.classList.add("order-note2"),a.appendChild(L);const v=document.createElement("select");v.classList.add("input-field");const T=document.createElement("option");T.value="taxi",T.text="Taxi",v.appendChild(T);const C=document.createElement("option");C.value="boda boda",C.text="Boda boda",v.appendChild(C);const b=document.createElement("option");b.value="bus",b.text="Bus",v.appendChild(b);const x=document.createElement("option");x.value="foot",x.text="Foot",v.appendChild(x);const I=document.createElement("option");I.value="",I.text="Select Means of Transport",I.disabled=!0,I.selected=!0,v.appendChild(I),v.required=!0,p.appendChild(v),a.appendChild(p);const k=document.createElement("input");k.type="text",k.placeholder="Delivery Place or Location",k.classList.add("input-field"),k.required=!0,p.appendChild(k),a.appendChild(p);const B=document.createElement("input");B.type="tel",B.placeholder="Telephone Contact",B.classList.add("input-field"),B.required=!0,p.appendChild(B),p.appendChild(B);const w=document.createElement("button");function S(){const e=document.querySelector(".loader-container");e&&document.body.removeChild(e)}function U(){S();const e=document.createElement("div");e.classList.add("success-popup");const t=document.createElement("h3"),n=document.createElement("p");n.innerText="Thank you for shopping with us... You can always find your receipts in your account and use ORDER IDs as reasons for payment. Thank you.",t.innerText="Order Successful !";const a=document.createElement("button");a.classList.add("okay-button"),a.innerText="Okay",e.appendChild(a),a.addEventListener("click",(()=>{location.reload(),document.body.removeChild(e)})),e.appendChild(t),e.appendChild(n),e.appendChild(a),document.body.appendChild(e)}function F(){S();const e=document.createElement("div");e.classList.add("error-popup");const t=document.createElement("h3");t.innerText="Oops..., something went wrong! Check your internet connection or else you have missing fields";const n=document.createElement("button");n.classList.add("okay-button"),n.innerText="Okay",n.addEventListener("click",(()=>{document.body.removeChild(e)})),e.appendChild(n),e.appendChild(t),e.appendChild(n),document.body.appendChild(e)}function G(){const e=document.getElementsByClassName("cart-item");for(;e.length>0;)e[0].remove();var t;t=0,document.getElementById("cart-count").innerText=t;document.getElementById("total-price").innerText="TOTAL: UGX 0.00"}w.innerText="Place Order",w.classList.add("order-button"),w.style.backgroundColor="#3f51b5",w.style.width="fit-content",w.style.color="#fff",w.style.padding="10px 20px",w.style.border="none",w.style.borderRadius="4px",w.style.fontSize="16px",w.style.marginTop="20px",a.appendChild(w),w.addEventListener("click",(async()=>{const e=document.createElement("div");e.classList.add("loader"),d.appendChild(e);const t=auth.currentUser;if(!t)return void function(){const e=document.getElementById("messageContainer"),t=document.getElementById("messageContent"),n=document.getElementById("overlay2");t.innerHTML='\n        <div id="companyLogo" class="company-logo">\n            <img src="bibo-phone-spare-world-logo-zip-file/png/logo-color.png" alt="Company Logo">\n        </div>\n        <p>You are not signed in. Please sign in to access your account and shop with us. Thank you!</p>\n        <button id="loginButton" class="login-button">\n            <i class="fa fa-sign-in"></i> Login\n        </button>\n    ',e.classList.add("fade-in"),e.style.display="flex",n.style.display="block",document.getElementById("loginButton").addEventListener("click",(function(){window.location.href="login.html"}))}();const n=t.uid,a=t.email,s=k.value,o=v.value,l=document.querySelector('input[name="payment-option"]:checked');if(!l)return void F();const i=l.value,r=[];c.querySelectorAll("tr").forEach(((e,t)=>{if(t>0){const t=e.querySelectorAll("td"),n=t[0].innerText,a=parseFloat(t[1].innerText.replace("UGX ","")),s=parseInt(t[2].innerText,10),c=parseFloat(t[3].innerText.replace("UGX ","")),o="yes"===t[4].innerText.toLowerCase();r.push({productName:n,price:a,quantity:s,total:c,isWholesale:o})}}));const p=document.getElementById("total-price"),m=parseFloat(p.innerText.replace("TOTAL: UGX ","")),u=document.createElement("div");u.classList.add("loader-container"),u.appendChild(e),document.body.appendChild(u);const y=ref(database,"orders"),h=push(y),g=B.value;document.querySelector('input[name="order-type"]:checked');if(!s||!o||!g)return F(),void document.body.removeChild(u);const E=function(e){const t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";let n="";for(let a=0;a<e;a++){const e=Math.floor(62*Math.random());n+=t.charAt(e)}return n}(10),f={orderId:E,orderDate:(new Date).toLocaleDateString(),orderTime:(new Date).toLocaleTimeString(),deliveryPlace:s,meansOfTransport:o,selectedPaymentOption:i,orderSummary:r,cartTotal:m,userId:n,userEmail:a,telephoneNumber:g};set(h,f).then((()=>{const e=ref(database,`users/${n}/receipts`),a=push(e),s={orderId:E,orderDate:f.orderDate,orderTime:f.orderTime,deliveryPlace:f.deliveryPlace,meansOfTransport:f.meansOfTransport,selectedPaymentOption:f.selectedPaymentOption,orderSummary:f.orderSummary,cartTotal:f.cartTotal,userId:n,userEmail:t.email};set(a,s).then((()=>{U(),G()})).catch((e=>{console.error("Error saving receipt:",e.message),F()})).finally((()=>{document.body.removeChild(u)}))})).catch((e=>{console.error("Error placing order:",e.message),F(),document.body.removeChild(u)})),setTimeout((()=>{U()}),2e3)}))}))})),document.getElementById("viewPurchaseHistoryBtn").addEventListener("click",(async function(e){e.preventDefault();const t=document.getElementById("viewPurchaseHistoryBtn"),n=document.getElementById("spinner2");t.disabled=!0,n.style.display="block";const a=auth.currentUser;if(!a)return void console.log("User not authenticated");const s=a.uid,c=ref(database,`users/${s}/receipts`);try{const e=await get(c);if(e.exists()){displayReceiptsPopup(e.val())}else showNoPurchaseMessage()}catch(e){console.error("Error fetching user receipts from Firebase:",e.message)}finally{t.disabled=!1,n.style.display="none"}}));const newScreensRef=ref(database,"products/newScreens"),gradeBScreensRef=ref(database,"products/gradeBScreens"),electronicsRef=ref(database,"products/electronics"),touchesRef=ref(database,"products/touches"),accessoriesRef=ref(database,"products/accessories"),portsRef=ref(database,"products/Ports"),fibresRef=ref(database,"products/Fibres"),buttonsRef=ref(database,"products/Buttons"),fingerPrintsRef=ref(database,"products/Finger-Prints"),cameraGlassRef=ref(database,"products/Camera-Glasses"),backCoversRef=ref(database,"products/Back-Covers"),chesisRef=ref(database,"products/Chesis"),glassesRef=ref(database,"products/Glasses"),productRefs=[newScreensRef,gradeBScreensRef,electronicsRef,touchesRef,accessoriesRef,portsRef,fibresRef,buttonsRef,fingerPrintsRef,cameraGlassRef,backCoversRef,chesisRef,glassesRef],observerOptions={root:null,rootMargin:"0px",threshold:.5},intersectionCallback=(e,t)=>{e.forEach((e=>{if(e.isIntersecting){const n=e.target.dataset.productRef;retrieveProducts(n),t.unobserve(e.target)}}))},productObserver=new IntersectionObserver(intersectionCallback,observerOptions);function observeProduct(e){const t=document.createElement("div");t.dataset.productRef=e,document.getElementById("products-list").appendChild(t),productObserver.observe(t)}const searchBtn=document.getElementById("search-btn");let isSearching=!1;searchBtn.addEventListener("click",(function(e){function t(){return""!==document.getElementById("search-bar").value.trim()}e.preventDefault(),isSearching?searchProducts():t()&&(!function(){if(!t())return;const e=document.createElement("i");e.classList.add("fa","fa-refresh","refresh-icon");const n=document.getElementById("search-bar");n.parentNode.insertBefore(e,n.nextSibling),e.addEventListener("click",(function(){!function(){const e=document.getElementById("search-bar");e.value="",isSearching=!1,function(){const e=document.getElementById("search-bar"),t=e.nextSibling;t&&t.classList.contains("refresh-icon")&&e.parentNode.removeChild(t);searchBtn.style.background="#008abf"}()}(),searchProducts()})),searchBtn.style.background="orange"}(),searchProducts(),isSearching=!0)}));const searchBar=document.getElementById("search-bar"),suggestionsContainer=document.getElementById("suggestions-container"),overlay=document.getElementById("overlay"),suggestionsTitle=document.createElement("div");suggestionsTitle.classList.add("suggestions-title"),suggestionsTitle.textContent="Suggestions",suggestionsContainer.appendChild(suggestionsTitle);let lastQuery="",suggestionsProcessed=!0;function fetchSuggestions(e,t=1){return new Promise(((t,n)=>{const a=[];let s=!1;const c=(e,t)=>t.every((t=>e.includes(t)));[newScreensRef,gradeBScreensRef,electronicsRef,touchesRef,accessoriesRef,portsRef,fibresRef,buttonsRef,fingerPrintsRef,cameraGlassRef,backCoversRef,chesisRef,glassesRef].forEach((t=>{const n=get(t).then((t=>{const n=t.val();for(let t in n){const a=n[t],o=a.name.toLowerCase(),l=a.description.toLowerCase();if(c(o,e.toLowerCase().split(" "))||c(o,e.replace(/[^a-zA-Z0-9\s]/g,"").toLowerCase().split(" "))||o.includes(e.toLowerCase())||l.includes(e.toLowerCase())){s=!0;const e=document.createElement("div");e.classList.add("suggestion-item");const t=document.createElement("i");t.classList.add("fa","fa-search","search-icon"),e.appendChild(t);const n=document.createTextNode(o);e.appendChild(n),e.addEventListener("click",(function(){searchBar.value=o,suggestionsContainer.style.display="none",overlay.style.display="none",searchProducts(o)})),suggestionsContainer.appendChild(e)}}}));a.push(n)})),Promise.all(a).then((()=>{suggestionsProcessed=!0,s?t():n()}))}))}function initializeSearch(){searchBar.addEventListener("input",(function(){for(;suggestionsContainer.children.length>3;)suggestionsContainer.removeChild(suggestionsContainer.lastChild);const e=searchBar.value.trim().toLowerCase();if(!e)return suggestionsContainer.style.display="none",void(overlay.style.display="none");lastQuery=e,suggestionsProcessed&&(suggestionsProcessed=!1,fetchSuggestions(e).then((()=>{suggestionsContainer.style.display="block",overlay.style.display="block"})).catch((()=>{const e=document.createElement("div");e.classList.add("no-results-message"),e.textContent="No Matching products found!",suggestionsContainer.appendChild(e),suggestionsContainer.style.display="block",overlay.style.display="block"})))})),document.addEventListener("click",(function(e){const t=document.getElementById("search-bar"),n=document.getElementById("suggestions-container"),a=document.getElementById("overlay");e.target===t||t.contains(e.target)||e.target===n||n.contains(e.target)||(n.style.display="none",a.style.display="none")}))}function searchProducts(e){const t=document.getElementById("search-bar").value.toLowerCase(),n=document.getElementById("loader");n.style.display="block",document.getElementById("products-list").innerHTML="";const a=[];[newScreensRef,gradeBScreensRef,electronicsRef,touchesRef,accessoriesRef,portsRef,fibresRef,buttonsRef,fingerPrintsRef,cameraGlassRef,backCoversRef,chesisRef,glassesRef].forEach((e=>{const n=get(e).then((e=>{const n=e.val(),a=document.getElementById("products-list");for(let i in n){const r=n[i],p=r.name.toLowerCase(),m=r.description.toLowerCase(),u=t.toLowerCase(),y=calculateSimilarity({innerText:p},u),h=calculateSimilarity({innerText:m},u);if(!u||y>.8||h>.8||p.includes(u)||m.includes(u)){const g=document.createElement("div");g.classList.add("card1");const E=document.createElement("img");E.src=r.image,E.alt=r.name,E.classList.add("product-img");const f=document.createElement("div");f.classList.add("loader2"),f.innerHTML='<i class="fas fa-spinner fa-spin"></i>',g.appendChild(f),E.addEventListener("load",(()=>{f.style.display="none"})),E.addEventListener("click",(()=>{const e=document.querySelector(".modal"),t=document.querySelector("#modalImg");e.style.display="block",t.src=E.src})),g.appendChild(E),E.addEventListener("error",(()=>{f.style.display="none",E.src="img/no photo.jpg",E.alt="Image Load Error"})),g.appendChild(E);const L=document.createElement("h2");L.innerText=r.name,g.appendChild(L);const v=document.createElement("div");v.classList.add("stars");for(let A=0;A<5;A++){const H=document.createElement("span");H.classList.add("star"),H.innerHTML="&#9733;",v.appendChild(H)}g.appendChild(v);const T=document.createElement("div");T.classList.add("rating-count");const C=Math.floor(100001*Math.random()),b=C>1e3?(C/1e3).toFixed(1)+"k":C;T.innerText=`(${b}) 5 star ratings`,g.appendChild(T);const x=50,I=document.createElement("p"),k=r.description;if(k.length>x){const O=k.substring(0,x);I.innerText=O+"...",I.title=k}else I.innerText=k;g.appendChild(I);const B=document.createElement("h4"),w=parseFloat(r.price).toLocaleString("en-US");B.innerText=`UGX ${w}`,g.appendChild(B);const S=document.createElement("h6"),U=parseFloat(r.wholesalePrice).toLocaleString("en-US");S.innerHTML=` Wholesale UGX:<span class="value"> ${U}</span>`,S.classList.add("wholesale-price"),g.appendChild(S);const F=document.createElement("button");F.innerText="Add to Cart";const G=document.createElement("i");let X;G.classList.add("fas","fa-shopping-cart"),F.prepend(G);const q={};function s(e){const t=document.getElementById("cart-items"),n=document.createElement("div");n.classList.add("toggle-container");const a=document.createElement("p");a.innerText="Wholesale",n.appendChild(a);const s=document.createElement("input");s.type="checkbox",s.classList.add("toggle-switch");const d=document.createElement("div");function i(){parseInt(u.value)<4&&s.checked?(alert("The number of pieces should be more than 3 to enable wholesale."),s.checked=!1):(d.style.display="inline-block",h(e.name).then((t=>{d.style.display="none",async function(e,t){const n=parseFloat(X.innerText.replace("UGX ","")),a=parseInt(u.value);if(g=a*n,t){const t=await h(e.name);null!==t&&(X.innerText=`UGX ${t}`,X.dataset.price=t)}else X.innerText=`UGX ${e.price}`,X.dataset.price=e.price;const s=parseInt(u.value);(function(e){const t=document.getElementById("total-price"),n=parseFloat(t.innerText.replace("TOTAL: UGX ",""));t.innerText="TOTAL: UGX "+(n+e).toFixed(2),console.log("Updated Total:",n+e)})(s*parseFloat(X.dataset.price)-g),console.log("Updated Price:",parseFloat(X.dataset.price))}(e,s.checked)})).catch((e=>{console.error("Error fetching wholesale price:",e)})))}d.classList.add("loading-spinner"),n.appendChild(s),n.appendChild(d),s.addEventListener("change",i);const r=document.createElement("div");r.classList.add("cart-item");const p=document.createElement("div");p.classList.add("product-details"),p.appendChild(n);const m=document.createElement("h5");m.innerText=e.name,p.appendChild(m),X=document.createElement("h4"),X.innerText=`UGX ${e.price}`,X.dataset.price=e.price,p.appendChild(X);const u=document.createElement("input");u.type="number",u.value=1,u.min=1,u.classList.add("quantity-input"),u.addEventListener("input",(()=>{console.log("Input value:",u.value);parseInt(u.value)>3?(s.checked=!0,i()):(s.checked=!1,i());const t=parseFloat(X.innerText.replace("UGX ",""));!function(e,t,n){if(e&&!isNaN(e)){const a=e*t;q[n]=a,c(),console.log("Result of multiplication:",a)}else q[n]=0,c(),console.log("Result of multiplication:",0)}(u.value,t,e.name)})),p.appendChild(u);const y=document.createElement("button");async function h(e){const t=["accessories","Ports","touches","newScreens","gradeBScreens","electronics"];for(const n of t){const t=ref(database,`products/${n}`),a=await get(child(t,e));if(a.exists()){const e=a.val().wholesalePrice;return null!==e?parseFloat(e):null}}return null}y.innerText="Delete",y.classList.add("delete-button"),y.addEventListener("click",(()=>{t.removeChild(r),o(-1),c()})),p.appendChild(y),r.appendChild(p),t.appendChild(r),o(1),l(e.name);let g=0}function c(){const e=document.getElementsByClassName("cart-item");let t=0;for(let n=0;n<e.length;n++){const a=e[n],s=a.querySelector(".product-details .quantity-input"),c=a.querySelector(".product-details h4");t+=parseInt(s.value)*parseFloat(c.dataset.price)}document.getElementById("total-price").innerText="TOTAL: UGX "+t.toFixed(2),console.log("Updated Total:",t)}function o(e){const t=document.getElementById("cart-count"),n=parseInt(t.innerText)||0;t.innerText=n+e}function l(e){const t=document.getElementById("message-container");t.innerText=`${e} added to cart`,t.style.display="block",setTimeout((()=>{t.style.display="none"}),3e3)}F.addEventListener("click",(()=>{const e=document.getElementById("cart-container");e.style.display="block";document.getElementById("close-cart-btn").style.display="none",setTimeout((()=>{e.style.opacity="1"}),10),s(r),c()})),g.appendChild(F);const N=document.getElementById("open-cart-btn"),$=document.getElementById("close-cart-btn"),M=document.getElementById("cart-content"),R=document.getElementById("overlay4"),P=document.body;function d(){return 0===document.getElementsByClassName("cart-item").length}N.addEventListener("click",(()=>{if(d())return M.style.display="none",void l("Cart is Empty! Nothing is");R.style.display="block",M.style.display="block",N.style.display="none",$.style.display="inline-block",P.classList.add("no-scroll"),setTimeout((()=>{R.style.opacity="1",M.style.opacity="1"}),10)})),$.addEventListener("click",(()=>{R.style.opacity="0",M.style.opacity="0",setTimeout((()=>{M.style.display="none",$.style.display="none",N.style.display="inline-block",R.style.display="none",P.classList.remove("no-scroll")}),300)})),a.appendChild(g)}}}));a.push(n)})),Promise.all(a).then((()=>{const e=Array.from(document.querySelectorAll(".card1"));e.sort(((e,n)=>{const a=calculateSimilarity(e,t);return calculateSimilarity(n,t)-a})),document.getElementById("products-list").innerHTML="";const a=document.getElementById("products-list");if(0===e.length){const e=document.createElement("div");e.classList.add("no-results-container");const t=document.createElement("img");t.src="img/nothing found.png",t.alt="No Results Image",e.appendChild(t);const n=document.createElement("p");n.innerText="Oops...No relevant products found. If you cant find your desired product, please contact us to add it. Thank you!",n.classList.add("no-results-message"),e.appendChild(n),a.appendChild(e)}else e.forEach((e=>a.appendChild(e)));n.style.display="none"}))}function similarity(e,t){const n=Math.max(e.length,t.length);return 1-levenshteinDistance(e,t)/n}function levenshteinDistance(e,t){const n=e.length,a=t.length,s=Array.from({length:n+1},(()=>Array(a+1).fill(0)));for(let c=0;c<=n;c++)for(let n=0;n<=a;n++)0===c?s[c][n]=n:0===n?s[c][n]=c:e[c-1]===t[n-1]?s[c][n]=s[c-1][n-1]:s[c][n]=1+Math.min(s[c-1][n],s[c][n-1],s[c-1][n-1]);return s[n][a]}function calculateSimilarity(e,t){const n=e.innerText.toLowerCase(),a=generatePermutations(t.toLowerCase().split(" "));let s=0;for(const e of a){const t=similarity(n,e.join(" "));s=Math.max(s,t)}return s}function generatePermutations(e){if(e.length<=1)return[e];const t=[];for(let n=0;n<e.length;n++){const a=generatePermutations([...e.slice(0,n),...e.slice(n+1)]);for(const s of a)t.push([e[n],...s])}return t}initializeSearch(),document.querySelector("#brand-new-link").addEventListener("click",(()=>{document.getElementById("products-list").innerHTML="";const e=document.getElementById("loader");e.style.display="block",get(newScreensRef).then((t=>{const n=t.val(),a=document.getElementById("products-list");for(let i in n){const r=n[i],p=document.createElement("div");p.classList.add("card1");const m=document.createElement("div");m.classList.add("used-badge2"),m.innerText="Brand New",p.appendChild(m);const u=document.createElement("div");u.innerHTML="<i class='fa fa-shield'></i>Good, Tested and Trusted Quality",u.classList.add("guarantee-text"),p.appendChild(u);const y=document.createElement("img");y.src=r.image,y.alt=r.name,y.classList.add("product-img");const h=document.createElement("div");h.classList.add("loader2"),h.innerHTML='<i class="fas fa-spinner fa-spin"></i>',p.appendChild(h),y.addEventListener("load",(()=>{h.style.display="none"})),y.addEventListener("click",(()=>{const e=document.querySelector(".modal"),t=document.querySelector("#modalImg");e.style.display="block",t.src=y.src})),p.appendChild(y),y.addEventListener("error",(()=>{h.style.display="none",y.src="img/no photo.jpg",y.alt="Image Load Error"})),p.appendChild(y);const g=document.createElement("h2");g.innerText=r.name,p.appendChild(g);const E=document.createElement("div");E.classList.add("stars");for(let M=0;M<5;M++){const R=document.createElement("span");R.classList.add("star"),R.innerHTML="&#9733;",E.appendChild(R)}p.appendChild(E);const f=document.createElement("div");f.classList.add("rating-count");const L=Math.floor(100001*Math.random()),v=L>1e3?(L/1e3).toFixed(1)+"k":L;f.innerText=`(${v}) 5 star ratings`,p.appendChild(f);const T=50,C=document.createElement("p"),b=r.description;if(b.length>T){const P=b.substring(0,T);C.innerText=P+"...",C.title=b}else C.innerText=b;p.appendChild(C);const x=document.createElement("h4"),I=parseFloat(r.price).toLocaleString("en-US");x.innerText=`UGX ${I}`,p.appendChild(x);const k=document.createElement("h6"),B=parseFloat(r.wholesalePrice).toLocaleString("en-US");k.innerHTML=` Wholesale UGX:<span class="value"> ${B}</span>`,k.classList.add("wholesale-price"),p.appendChild(k);const w=document.createElement("button");w.innerText="Add to Cart";const S=document.createElement("i");let U;S.classList.add("fas","fa-shopping-cart"),w.prepend(S);const F={};function s(e){const t=document.getElementById("cart-items"),n=document.createElement("div");n.classList.add("toggle-container");const a=document.createElement("p");a.innerText="Wholesale",n.appendChild(a);const s=document.createElement("input");s.type="checkbox",s.classList.add("toggle-switch");const d=document.createElement("div");function i(){parseInt(u.value)<4&&s.checked?(alert("The number of pieces should be more than 3 to enable wholesale."),s.checked=!1):(d.style.display="inline-block",h(e.name).then((t=>{d.style.display="none",async function(e,t){const n=parseFloat(U.innerText.replace("UGX ","")),a=parseInt(u.value);if(g=a*n,t){const t=await h(e.name);null!==t&&(U.innerText=`UGX ${t}`,U.dataset.price=t)}else U.innerText=`UGX ${e.price}`,U.dataset.price=e.price;const s=parseInt(u.value);(function(e){const t=document.getElementById("total-price"),n=parseFloat(t.innerText.replace("TOTAL: UGX ",""));t.innerText="TOTAL: UGX "+(n+e).toFixed(2),console.log("Updated Total:",n+e)})(s*parseFloat(U.dataset.price)-g),console.log("Updated Price:",parseFloat(U.dataset.price))}(e,s.checked)})).catch((e=>{console.error("Error fetching wholesale price:",e)})))}d.classList.add("loading-spinner"),n.appendChild(s),n.appendChild(d),s.addEventListener("change",i);const r=document.createElement("div");r.classList.add("cart-item");const p=document.createElement("div");p.classList.add("product-details"),p.appendChild(n);const m=document.createElement("h5");m.innerText=e.name,p.appendChild(m),U=document.createElement("h4"),U.innerText=`UGX ${e.price}`,U.dataset.price=e.price,p.appendChild(U);const u=document.createElement("input");u.type="number",u.value=1,u.min=1,u.classList.add("quantity-input"),u.addEventListener("input",(()=>{console.log("Input value:",u.value);parseInt(u.value)>3?(s.checked=!0,i()):(s.checked=!1,i());const t=parseFloat(U.innerText.replace("UGX ",""));!function(e,t,n){if(e&&!isNaN(e)){const a=e*t;F[n]=a,c(),console.log("Result of multiplication:",a)}else F[n]=0,c(),console.log("Result of multiplication:",0)}(u.value,t,e.name)})),p.appendChild(u);const y=document.createElement("button");async function h(e){const t=ref(database,"products/newScreens"),n=await get(child(t,e));if(n.exists()){const e=n.val().wholesalePrice;return null!==e?parseFloat(e):null}return null}y.innerText="Delete",y.classList.add("delete-button"),y.addEventListener("click",(()=>{t.removeChild(r),o(-1),c()})),p.appendChild(y),r.appendChild(p),t.appendChild(r),o(1),l(e.name);let g=0}function c(){const e=document.getElementsByClassName("cart-item");let t=0;for(let n=0;n<e.length;n++){const a=e[n],s=a.querySelector(".product-details .quantity-input"),c=a.querySelector(".product-details h4");t+=parseInt(s.value)*parseFloat(c.dataset.price)}document.getElementById("total-price").innerText="TOTAL: UGX "+t.toFixed(2),console.log("Updated Total:",t)}function o(e){const t=document.getElementById("cart-count"),n=parseInt(t.innerText)||0;t.innerText=n+e}function l(e){const t=document.getElementById("message-container");t.innerText=`${e} added to cart`,t.style.display="block",setTimeout((()=>{t.style.display="none"}),3e3)}w.addEventListener("click",(()=>{const e=document.getElementById("cart-container");e.style.display="block";document.getElementById("close-cart-btn").style.display="none",setTimeout((()=>{e.style.opacity="1"}),10),s(r),c()})),p.appendChild(w);const G=document.getElementById("open-cart-btn"),X=document.getElementById("close-cart-btn"),q=document.getElementById("cart-content"),N=document.getElementById("overlay4");q.style.display="none";const $=document.body;function d(){return 0===document.getElementsByClassName("cart-item").length}G.addEventListener("click",(()=>{if(d())return q.style.display="none",void l("Cart is Empty! Nothing is");N.style.display="block",q.style.display="block",G.style.display="none",X.style.display="inline-block",$.classList.add("no-scroll"),setTimeout((()=>{N.style.opacity="1",q.style.opacity="1"}),10)})),X.addEventListener("click",(()=>{N.style.opacity="0",q.style.opacity="0",setTimeout((()=>{q.style.display="none",X.style.display="none",G.style.display="inline-block",N.style.display="none",$.classList.remove("no-scroll")}),300)})),a.appendChild(p),e.style.display="none"}}))})),document.querySelector("#uk-used-link").addEventListener("click",(()=>{document.getElementById("products-list").innerHTML="";const e=document.getElementById("loader");e.style.display="block",get(gradeBScreensRef).then((t=>{const n=t.val(),a=document.getElementById("products-list");for(let i in n){const r=n[i],p=document.createElement("div");p.classList.add("card1");const m=document.createElement("div");m.classList.add("used-badge"),m.innerText="Grade B",p.appendChild(m);const u=document.createElement("div");u.innerHTML="<i class='fa fa-shield'></i>No Guarantee for Grade B",u.classList.add("guarantee-text"),p.appendChild(u);const y=document.createElement("img");y.src=r.image,y.alt=r.name,y.classList.add("product-img");const h=document.createElement("div");h.classList.add("loader2"),h.innerHTML='<i class="fas fa-spinner fa-spin"></i>',p.appendChild(h),y.addEventListener("load",(()=>{h.style.display="none"})),y.addEventListener("click",(()=>{const e=document.querySelector(".modal"),t=document.querySelector("#modalImg");e.style.display="block",t.src=y.src})),p.appendChild(y),y.addEventListener("error",(()=>{h.style.display="none",y.src="img/no photo.jpg",y.alt="Image Load Error"})),p.appendChild(y);const g=document.createElement("h2");g.innerText=r.name,p.appendChild(g);const E=document.createElement("div");E.classList.add("stars");for(let M=0;M<5;M++){const R=document.createElement("span");R.classList.add("star"),R.innerHTML="&#9733;",E.appendChild(R)}p.appendChild(E);const f=document.createElement("div");f.classList.add("rating-count");const L=Math.floor(100001*Math.random()),v=L>1e3?(L/1e3).toFixed(1)+"k":L;f.innerText=`(${v}) 5 star ratings`,p.appendChild(f);const T=50,C=document.createElement("p"),b=r.description;if(b.length>T){const P=b.substring(0,T);C.innerText=P+"...",C.title=b}else C.innerText=b;p.appendChild(C);const x=document.createElement("h4"),I=parseFloat(r.price).toLocaleString("en-US");x.innerText=`UGX ${I}`,p.appendChild(x);const k=document.createElement("h6"),B=parseFloat(r.wholesalePrice).toLocaleString("en-US");k.innerHTML=` Wholesale UGX:<span class="value"> ${B}</span>`,k.classList.add("wholesale-price"),p.appendChild(k);const w=document.createElement("button");w.innerText="Add to Cart";const S=document.createElement("i");let U;S.classList.add("fas","fa-shopping-cart"),w.prepend(S);const F={};function s(e){const t=document.getElementById("cart-items"),n=document.createElement("div");n.classList.add("toggle-container");const a=document.createElement("p");a.innerText="Wholesale",n.appendChild(a);const s=document.createElement("input");s.type="checkbox",s.classList.add("toggle-switch");const d=document.createElement("div");function i(){parseInt(u.value)<4&&s.checked?(alert("The number of pieces should be more than 3 to enable wholesale."),s.checked=!1):(d.style.display="inline-block",h(e.name).then((t=>{d.style.display="none",async function(e,t){const n=parseFloat(U.innerText.replace("UGX ","")),a=parseInt(u.value);if(g=a*n,t){const t=await h(e.name);null!==t&&(U.innerText=`UGX ${t}`,U.dataset.price=t)}else U.innerText=`UGX ${e.price}`,U.dataset.price=e.price;const s=parseInt(u.value);(function(e){const t=document.getElementById("total-price"),n=parseFloat(t.innerText.replace("TOTAL: UGX ",""));t.innerText="TOTAL: UGX "+(n+e).toFixed(2),console.log("Updated Total:",n+e)})(s*parseFloat(U.dataset.price)-g),console.log("Updated Price:",parseFloat(U.dataset.price))}(e,s.checked)})).catch((e=>{console.error("Error fetching wholesale price:",e)})))}d.classList.add("loading-spinner"),n.appendChild(s),n.appendChild(d),s.addEventListener("change",i);const r=document.createElement("div");r.classList.add("cart-item");const p=document.createElement("div");p.classList.add("product-details"),p.appendChild(n);const m=document.createElement("h5");m.innerText=e.name,p.appendChild(m),U=document.createElement("h4"),U.innerText=`UGX ${e.price}`,U.dataset.price=e.price,p.appendChild(U);const u=document.createElement("input");u.type="number",u.value=1,u.min=1,u.classList.add("quantity-input"),u.addEventListener("input",(()=>{console.log("Input value:",u.value);parseInt(u.value)>3?(s.checked=!0,i()):(s.checked=!1,i());const t=parseFloat(U.innerText.replace("UGX ",""));!function(e,t,n){if(e&&!isNaN(e)){const a=e*t;F[n]=a,c(),console.log("Result of multiplication:",a)}else F[n]=0,c(),console.log("Result of multiplication:",0)}(u.value,t,e.name)})),p.appendChild(u);const y=document.createElement("button");async function h(e){const t=ref(database,"products/gradeBScreens"),n=await get(child(t,e));if(n.exists()){const e=n.val().wholesalePrice;return null!==e?parseFloat(e):null}return null}y.innerText="Delete",y.classList.add("delete-button"),y.addEventListener("click",(()=>{t.removeChild(r),o(-1),c()})),p.appendChild(y),r.appendChild(p),t.appendChild(r),o(1),l(e.name);let g=0}function c(){const e=document.getElementsByClassName("cart-item");let t=0;for(let n=0;n<e.length;n++){const a=e[n],s=a.querySelector(".product-details .quantity-input"),c=a.querySelector(".product-details h4");t+=parseInt(s.value)*parseFloat(c.dataset.price)}document.getElementById("total-price").innerText="TOTAL: UGX "+t.toFixed(2),console.log("Updated Total:",t)}function o(e){const t=document.getElementById("cart-count"),n=parseInt(t.innerText)||0;t.innerText=n+e}function l(e){const t=document.getElementById("message-container");t.innerText=`${e} added to cart`,t.style.display="block",setTimeout((()=>{t.style.display="none"}),3e3)}w.addEventListener("click",(()=>{const e=document.getElementById("cart-container");e.style.display="block";document.getElementById("close-cart-btn").style.display="none",setTimeout((()=>{e.style.opacity="1"}),10),s(r),c()})),p.appendChild(w);const G=document.getElementById("open-cart-btn"),X=document.getElementById("close-cart-btn"),q=document.getElementById("cart-content"),N=document.getElementById("overlay4");q.style.display="none";const $=document.body;function d(){return 0===document.getElementsByClassName("cart-item").length}G.addEventListener("click",(()=>{if(d())return q.style.display="none",void l("Cart is Empty! Nothing is");N.style.display="block",q.style.display="block",G.style.display="none",X.style.display="inline-block",$.classList.add("no-scroll"),setTimeout((()=>{N.style.opacity="1",q.style.opacity="1"}),10)})),X.addEventListener("click",(()=>{N.style.opacity="0",q.style.opacity="0",setTimeout((()=>{q.style.display="none",X.style.display="none",G.style.display="inline-block",N.style.display="none",$.classList.remove("no-scroll")}),300)})),a.appendChild(p),e.style.display="none"}}))})),document.querySelector("#newScreens-link").addEventListener("click",(()=>{document.getElementById("products-list").innerHTML="";const e=document.getElementById("loader");e.style.display="block",get(newScreensRef).then((t=>{const n=t.val(),a=document.getElementById("products-list");for(let i in n){const r=n[i],p=document.createElement("div");p.classList.add("card1");const m=document.createElement("div");m.classList.add("used-badge2"),m.innerText="Brand New",p.appendChild(m);const u=document.createElement("div");u.innerHTML="<i class='fa fa-shield'></i>Good, Tested and Trusted Quality Screens",u.classList.add("guarantee-text"),p.appendChild(u);const y=document.createElement("img");y.src=r.image,y.alt=r.name,y.classList.add("product-img");const h=document.createElement("div");h.classList.add("loader2"),h.innerHTML='<i class="fas fa-spinner fa-spin"></i>',p.appendChild(h),y.addEventListener("load",(()=>{h.style.display="none"})),y.addEventListener("click",(()=>{const e=document.querySelector(".modal"),t=document.querySelector("#modalImg");e.style.display="block",t.src=y.src})),p.appendChild(y),y.addEventListener("error",(()=>{h.style.display="none",y.src="img/no photo.jpg",y.alt="Image Load Error"})),p.appendChild(y);const g=document.createElement("h2");g.innerText=r.name,p.appendChild(g);const E=document.createElement("div");E.classList.add("stars");for(let M=0;M<5;M++){const R=document.createElement("span");R.classList.add("star"),R.innerHTML="&#9733;",E.appendChild(R)}p.appendChild(E);const f=document.createElement("div");f.classList.add("rating-count");const L=Math.floor(100001*Math.random()),v=L>1e3?(L/1e3).toFixed(1)+"k":L;f.innerText=`(${v}) 5 star ratings`,p.appendChild(f);const T=50,C=document.createElement("p"),b=r.description;if(b.length>T){const P=b.substring(0,T);C.innerText=P+"...",C.title=b}else C.innerText=b;p.appendChild(C);const x=document.createElement("h4"),I=parseFloat(r.price).toLocaleString("en-US");x.innerText=`UGX ${I}`,p.appendChild(x);const k=document.createElement("h6"),B=parseFloat(r.wholesalePrice).toLocaleString("en-US");k.innerHTML=` Wholesale UGX:<span class="value"> ${B}</span>`,k.classList.add("wholesale-price"),p.appendChild(k);const w=document.createElement("button");w.innerText="Add to Cart";const S=document.createElement("i");let U;S.classList.add("fas","fa-shopping-cart"),w.prepend(S);const F={};function s(e){const t=document.getElementById("cart-items"),n=document.createElement("div");n.classList.add("toggle-container");const a=document.createElement("p");a.innerText="Wholesale",n.appendChild(a);const s=document.createElement("input");s.type="checkbox",s.classList.add("toggle-switch");const d=document.createElement("div");function i(){parseInt(u.value)<4&&s.checked?(alert("The number of pieces should be more than 3 to enable wholesale."),s.checked=!1):(d.style.display="inline-block",h(e.name).then((t=>{d.style.display="none",async function(e,t){const n=parseFloat(U.innerText.replace("UGX ","")),a=parseInt(u.value);if(g=a*n,t){const t=await h(e.name);null!==t&&(U.innerText=`UGX ${t}`,U.dataset.price=t)}else U.innerText=`UGX ${e.price}`,U.dataset.price=e.price;const s=parseInt(u.value);(function(e){const t=document.getElementById("total-price"),n=parseFloat(t.innerText.replace("TOTAL: UGX ",""));t.innerText="TOTAL: UGX "+(n+e).toFixed(2),console.log("Updated Total:",n+e)})(s*parseFloat(U.dataset.price)-g),console.log("Updated Price:",parseFloat(U.dataset.price))}(e,s.checked)})).catch((e=>{console.error("Error fetching wholesale price:",e)})))}d.classList.add("loading-spinner"),n.appendChild(s),n.appendChild(d),s.addEventListener("change",i);const r=document.createElement("div");r.classList.add("cart-item");const p=document.createElement("div");p.classList.add("product-details"),p.appendChild(n);const m=document.createElement("h5");m.innerText=e.name,p.appendChild(m),U=document.createElement("h4"),U.innerText=`UGX ${e.price}`,U.dataset.price=e.price,p.appendChild(U);const u=document.createElement("input");u.type="number",u.value=1,u.min=1,u.classList.add("quantity-input"),u.addEventListener("input",(()=>{console.log("Input value:",u.value);parseInt(u.value)>3?(s.checked=!0,i()):(s.checked=!1,i());const t=parseFloat(U.innerText.replace("UGX ",""));!function(e,t,n){if(e&&!isNaN(e)){const a=e*t;F[n]=a,c(),console.log("Result of multiplication:",a)}else F[n]=0,c(),console.log("Result of multiplication:",0)}(u.value,t,e.name)})),p.appendChild(u);const y=document.createElement("button");async function h(e){const t=ref(database,"products/newScreens"),n=await get(child(t,e));if(n.exists()){const e=n.val().wholesalePrice;return null!==e?parseFloat(e):null}return null}y.innerText="Delete",y.classList.add("delete-button"),y.addEventListener("click",(()=>{t.removeChild(r),o(-1),c()})),p.appendChild(y),r.appendChild(p),t.appendChild(r),o(1),l(e.name);let g=0}function c(){const e=document.getElementsByClassName("cart-item");let t=0;for(let n=0;n<e.length;n++){const a=e[n],s=a.querySelector(".product-details .quantity-input"),c=a.querySelector(".product-details h4");t+=parseInt(s.value)*parseFloat(c.dataset.price)}document.getElementById("total-price").innerText="TOTAL: UGX "+t.toFixed(2),console.log("Updated Total:",t)}function o(e){const t=document.getElementById("cart-count"),n=parseInt(t.innerText)||0;t.innerText=n+e}function l(e){const t=document.getElementById("message-container");t.innerText=`${e} added to cart`,t.style.display="block",setTimeout((()=>{t.style.display="none"}),3e3)}w.addEventListener("click",(()=>{const e=document.getElementById("cart-container");e.style.display="block";document.getElementById("close-cart-btn").style.display="none",setTimeout((()=>{e.style.opacity="1"}),10),s(r),c()})),p.appendChild(w);const G=document.getElementById("open-cart-btn"),X=document.getElementById("close-cart-btn"),q=document.getElementById("cart-content"),N=document.getElementById("overlay4");q.style.display="none";const $=document.body;function d(){return 0===document.getElementsByClassName("cart-item").length}G.addEventListener("click",(()=>{if(d())return q.style.display="none",void l("Cart is Empty! Nothing is");N.style.display="block",q.style.display="block",G.style.display="none",X.style.display="inline-block",$.classList.add("no-scroll"),setTimeout((()=>{N.style.opacity="1",q.style.opacity="1"}),10)})),X.addEventListener("click",(()=>{N.style.opacity="0",q.style.opacity="0",setTimeout((()=>{q.style.display="none",X.style.display="none",G.style.display="inline-block",N.style.display="none",$.classList.remove("no-scroll")}),300)})),a.appendChild(p),e.style.display="none"}}))})),get(gradeBScreensRef).then((e=>{const t=e.val(),n=document.getElementById("loader");n.style.display="block";const a=document.getElementById("products-list");for(let i in t){const r=t[i],p=document.createElement("div");p.classList.add("card1");const m=document.createElement("div");m.classList.add("used-badge"),m.innerText="Grade B ",p.appendChild(m);const u=document.createElement("div");u.innerHTML="<i class='fa fa-shield'></i> No Guarantee for Grede B",u.classList.add("guarantee-text"),p.appendChild(u);const y=document.createElement("img");y.src=r.image,y.alt=r.name,y.classList.add("product-img");const h=document.createElement("div");h.classList.add("loader2"),h.innerHTML='<i class="fas fa-spinner fa-spin"></i>',p.appendChild(h),y.addEventListener("load",(()=>{h.style.display="none"})),y.addEventListener("click",(()=>{const e=document.querySelector(".modal"),t=document.querySelector("#modalImg");e.style.display="block",t.src=y.src})),p.appendChild(y),y.addEventListener("error",(()=>{h.style.display="none",y.src="img/no photo.jpg",y.alt="Image Load Error"})),p.appendChild(y);const g=document.createElement("h2");g.innerText=r.name,p.appendChild(g);const E=document.createElement("div");E.classList.add("stars");for(let M=0;M<5;M++){const R=document.createElement("span");R.classList.add("star"),R.innerHTML="&#9733;",E.appendChild(R)}p.appendChild(E);const f=document.createElement("div");f.classList.add("rating-count");const L=Math.floor(100001*Math.random()),v=L>1e3?(L/1e3).toFixed(1)+"k":L;f.innerText=`(${v}) 5 star ratings`,p.appendChild(f);const T=50,C=document.createElement("p"),b=r.description;if(b.length>T){const P=b.substring(0,T);C.innerText=P+"...",C.title=b}else C.innerText=b;p.appendChild(C);const x=document.createElement("h4"),I=parseFloat(r.price).toLocaleString("en-US");x.innerText=`UGX ${I}`,p.appendChild(x);const k=document.createElement("h6"),B=parseFloat(r.wholesalePrice).toLocaleString("en-US");k.innerHTML=` Wholesale UGX:<span class="value"> ${B}</span>`,k.classList.add("wholesale-price"),p.appendChild(k);const w=document.createElement("button");w.innerText="Add to Cart";const S=document.createElement("i");let U;S.classList.add("fas","fa-shopping-cart"),w.prepend(S);const F={};function s(e){const t=document.getElementById("cart-items"),n=document.createElement("div");n.classList.add("toggle-container");const a=document.createElement("p");a.innerText="Wholesale",n.appendChild(a);const s=document.createElement("input");s.type="checkbox",s.classList.add("toggle-switch");const d=document.createElement("div");function i(){parseInt(u.value)<4&&s.checked?(alert("The number of pieces should be more than 3 to enable wholesale."),s.checked=!1):(d.style.display="inline-block",h(e.name).then((t=>{d.style.display="none",async function(e,t){const n=parseFloat(U.innerText.replace("UGX ","")),a=parseInt(u.value);if(g=a*n,t){const t=await h(e.name);null!==t&&(U.innerText=`UGX ${t}`,U.dataset.price=t)}else U.innerText=`UGX ${e.price}`,U.dataset.price=e.price;const s=parseInt(u.value);(function(e){const t=document.getElementById("total-price"),n=parseFloat(t.innerText.replace("TOTAL: UGX ",""));t.innerText="TOTAL: UGX "+(n+e).toFixed(2),console.log("Updated Total:",n+e)})(s*parseFloat(U.dataset.price)-g),console.log("Updated Price:",parseFloat(U.dataset.price))}(e,s.checked)})).catch((e=>{console.error("Error fetching wholesale price:",e)})))}d.classList.add("loading-spinner"),n.appendChild(s),n.appendChild(d),s.addEventListener("change",i);const r=document.createElement("div");r.classList.add("cart-item");const p=document.createElement("div");p.classList.add("product-details"),p.appendChild(n);const m=document.createElement("h5");m.innerText=e.name,p.appendChild(m),U=document.createElement("h4"),U.innerText=`UGX ${e.price}`,U.dataset.price=e.price,p.appendChild(U);const u=document.createElement("input");u.type="number",u.value=1,u.min=1,u.classList.add("quantity-input"),u.addEventListener("input",(()=>{console.log("Input value:",u.value);parseInt(u.value)>3?(s.checked=!0,i()):(s.checked=!1,i());const t=parseFloat(U.innerText.replace("UGX ",""));!function(e,t,n){if(e&&!isNaN(e)){const a=e*t;F[n]=a,c(),console.log("Result of multiplication:",a)}else F[n]=0,c(),console.log("Result of multiplication:",0)}(u.value,t,e.name)})),p.appendChild(u);const y=document.createElement("button");async function h(e){const t=ref(database,"products/gradeBScreens"),n=await get(child(t,e));if(n.exists()){const e=n.val().wholesalePrice;return null!==e?parseFloat(e):null}return null}y.innerText="Delete",y.classList.add("delete-button"),y.addEventListener("click",(()=>{t.removeChild(r),o(-1),c()})),p.appendChild(y),r.appendChild(p),t.appendChild(r),o(1),l(e.name);let g=0}function c(){const e=document.getElementsByClassName("cart-item");let t=0;for(let n=0;n<e.length;n++){const a=e[n],s=a.querySelector(".product-details .quantity-input"),c=a.querySelector(".product-details h4");t+=parseInt(s.value)*parseFloat(c.dataset.price)}document.getElementById("total-price").innerText="TOTAL: UGX "+t.toFixed(2),console.log("Updated Total:",t)}function o(e){const t=document.getElementById("cart-count"),n=parseInt(t.innerText)||0;t.innerText=n+e}function l(e){const t=document.getElementById("message-container");t.innerText=`${e} added to cart`,t.style.display="block",setTimeout((()=>{t.style.display="none"}),3e3)}w.addEventListener("click",(()=>{const e=document.getElementById("cart-container");e.style.display="block";document.getElementById("close-cart-btn").style.display="none",setTimeout((()=>{e.style.opacity="1"}),10),s(r),c()})),p.appendChild(w);const G=document.getElementById("open-cart-btn"),X=document.getElementById("close-cart-btn"),q=document.getElementById("cart-content"),N=document.getElementById("overlay4");q.style.display="none";const $=document.body;function d(){return 0===document.getElementsByClassName("cart-item").length}G.addEventListener("click",(()=>{if(d())return q.style.display="none",void l("Cart is Empty! Nothing is");N.style.display="block",q.style.display="block",G.style.display="none",X.style.display="inline-block",$.classList.add("no-scroll"),setTimeout((()=>{N.style.opacity="1",q.style.opacity="1"}),10)})),X.addEventListener("click",(()=>{N.style.opacity="0",q.style.opacity="0",setTimeout((()=>{q.style.display="none",X.style.display="none",G.style.display="inline-block",N.style.display="none",$.classList.remove("no-scroll")}),300)})),a.appendChild(p),n.style.display="none"}})),document.querySelector("#touches-link").addEventListener("click",(()=>{document.getElementById("products-list").innerHTML="";const e=document.getElementById("loader");e.style.display="block",get(touchesRef).then((t=>{const n=t.val(),a=document.getElementById("products-list");for(let i in n){const r=n[i],p=document.createElement("div");p.classList.add("card1");const m=document.createElement("div");m.classList.add("used-badge2"),m.innerText="Brand New",p.appendChild(m);const u=document.createElement("img");u.src=r.image,u.alt=r.name,u.classList.add("product-img");const y=document.createElement("div");y.classList.add("loader2"),y.innerHTML='<i class="fas fa-spinner fa-spin"></i>',p.appendChild(y),u.addEventListener("load",(()=>{y.style.display="none"})),u.addEventListener("click",(()=>{const e=document.querySelector(".modal"),t=document.querySelector("#modalImg");e.style.display="block",t.src=u.src})),p.appendChild(u),u.addEventListener("error",(()=>{y.style.display="none",u.src="img/no photo.jpg",u.alt="Image Load Error"})),p.appendChild(u);const h=document.createElement("h2");h.innerText=r.name,p.appendChild(h);const g=document.createElement("div");g.classList.add("stars");for(let $=0;$<5;$++){const M=document.createElement("span");M.classList.add("star"),M.innerHTML="&#9733;",g.appendChild(M)}p.appendChild(g);const E=document.createElement("div");E.classList.add("rating-count");const f=Math.floor(100001*Math.random()),L=f>1e3?(f/1e3).toFixed(1)+"k":f;E.innerText=`(${L}) 5 star ratings`,p.appendChild(E);const v=50,T=document.createElement("p"),C=r.description;if(C.length>v){const R=C.substring(0,v);T.innerText=R+"...",T.title=C}else T.innerText=C;p.appendChild(T);const b=document.createElement("h4"),x=parseFloat(r.price).toLocaleString("en-US");b.innerText=`UGX ${x}`,p.appendChild(b);const I=document.createElement("h6"),k=parseFloat(r.wholesalePrice).toLocaleString("en-US");I.innerHTML=` Wholesale UGX:<span class="value"> ${k}</span>`,I.classList.add("wholesale-price"),p.appendChild(I);const B=document.createElement("button");B.innerText="Add to Cart";const w=document.createElement("i");let S;w.classList.add("fas","fa-shopping-cart"),B.prepend(w);const U={};function s(e){const t=document.getElementById("cart-items"),n=document.createElement("div");n.classList.add("toggle-container");const a=document.createElement("p");a.innerText="Wholesale",n.appendChild(a);const s=document.createElement("input");s.type="checkbox",s.classList.add("toggle-switch");const d=document.createElement("div");function i(){parseInt(u.value)<4&&s.checked?(alert("The number of pieces should be more than 3 to enable wholesale."),s.checked=!1):(d.style.display="inline-block",h(e.name).then((t=>{d.style.display="none",async function(e,t){const n=parseFloat(S.innerText.replace("UGX ","")),a=parseInt(u.value);if(g=a*n,t){const t=await h(e.name);null!==t&&(S.innerText=`UGX ${t}`,S.dataset.price=t)}else S.innerText=`UGX ${e.price}`,S.dataset.price=e.price;const s=parseInt(u.value);(function(e){const t=document.getElementById("total-price"),n=parseFloat(t.innerText.replace("TOTAL: UGX ",""));t.innerText="TOTAL: UGX "+(n+e).toFixed(2),console.log("Updated Total:",n+e)})(s*parseFloat(S.dataset.price)-g),console.log("Updated Price:",parseFloat(S.dataset.price))}(e,s.checked)})).catch((e=>{console.error("Error fetching wholesale price:",e)})))}d.classList.add("loading-spinner"),n.appendChild(s),n.appendChild(d),s.addEventListener("change",i);const r=document.createElement("div");r.classList.add("cart-item");const p=document.createElement("div");p.classList.add("product-details"),p.appendChild(n);const m=document.createElement("h5");m.innerText=e.name,p.appendChild(m),S=document.createElement("h4"),S.innerText=`UGX ${e.price}`,S.dataset.price=e.price,p.appendChild(S);const u=document.createElement("input");u.type="number",u.value=1,u.min=1,u.classList.add("quantity-input"),u.addEventListener("input",(()=>{console.log("Input value:",u.value);parseInt(u.value)>3?(s.checked=!0,i()):(s.checked=!1,i());const t=parseFloat(S.innerText.replace("UGX ",""));!function(e,t,n){if(e&&!isNaN(e)){const a=e*t;U[n]=a,c(),console.log("Result of multiplication:",a)}else U[n]=0,c(),console.log("Result of multiplication:",0)}(u.value,t,e.name)})),p.appendChild(u);const y=document.createElement("button");async function h(e){const t=ref(database,"products/touches"),n=await get(child(t,e));if(n.exists()){const e=n.val().wholesalePrice;return null!==e?parseFloat(e):null}return null}y.innerText="Delete",y.classList.add("delete-button"),y.addEventListener("click",(()=>{t.removeChild(r),o(-1),c()})),p.appendChild(y),r.appendChild(p),t.appendChild(r),o(1),l(e.name);let g=0}function c(){const e=document.getElementsByClassName("cart-item");let t=0;for(let n=0;n<e.length;n++){const a=e[n],s=a.querySelector(".product-details .quantity-input"),c=a.querySelector(".product-details h4");t+=parseInt(s.value)*parseFloat(c.dataset.price)}document.getElementById("total-price").innerText="TOTAL: UGX "+t.toFixed(2),console.log("Updated Total:",t)}function o(e){const t=document.getElementById("cart-count"),n=parseInt(t.innerText)||0;t.innerText=n+e}function l(e){const t=document.getElementById("message-container");t.innerText=`${e} added to cart`,t.style.display="block",setTimeout((()=>{t.style.display="none"}),3e3)}B.addEventListener("click",(()=>{const e=document.getElementById("cart-container");e.style.display="block";document.getElementById("close-cart-btn").style.display="none",setTimeout((()=>{e.style.opacity="1"}),10),s(r),c()})),p.appendChild(B);const F=document.getElementById("open-cart-btn"),G=document.getElementById("close-cart-btn"),X=document.getElementById("cart-content"),q=document.getElementById("overlay4");X.style.display="none";const N=document.body;function d(){return 0===document.getElementsByClassName("cart-item").length}F.addEventListener("click",(()=>{if(d())return X.style.display="none",void l("Cart is Empty! Nothing is");q.style.display="block",X.style.display="block",F.style.display="none",G.style.display="inline-block",N.classList.add("no-scroll"),setTimeout((()=>{q.style.opacity="1",X.style.opacity="1"}),10)})),G.addEventListener("click",(()=>{q.style.opacity="0",X.style.opacity="0",setTimeout((()=>{X.style.display="none",G.style.display="none",F.style.display="inline-block",q.style.display="none",N.classList.remove("no-scroll")}),300)})),a.appendChild(p),e.style.display="none"}}))})),document.querySelector("#glasses-link").addEventListener("click",(()=>{document.getElementById("products-list").innerHTML="";const e=document.getElementById("loader");e.style.display="block",get(GlassesRef).then((t=>{const n=t.val(),a=document.getElementById("products-list");for(let i in n){const r=n[i],p=document.createElement("div");p.classList.add("card1");const m=document.createElement("div");m.classList.add("used-badge2"),m.innerText="Brand New",p.appendChild(m);const u=document.createElement("img");u.src=r.image,u.alt=r.name,u.classList.add("product-img");const y=document.createElement("div");y.classList.add("loader2"),y.innerHTML='<i class="fas fa-spinner fa-spin"></i>',p.appendChild(y),u.addEventListener("load",(()=>{y.style.display="none"})),u.addEventListener("click",(()=>{const e=document.querySelector(".modal"),t=document.querySelector("#modalImg");e.style.display="block",t.src=u.src})),p.appendChild(u),u.addEventListener("error",(()=>{y.style.display="none",u.src="img/no photo.jpg",u.alt="Image Load Error"})),p.appendChild(u);const h=document.createElement("h2");h.innerText=r.name,p.appendChild(h);const g=document.createElement("div");g.classList.add("stars");for(let $=0;$<5;$++){const M=document.createElement("span");M.classList.add("star"),M.innerHTML="&#9733;",g.appendChild(M)}p.appendChild(g);const E=document.createElement("div");E.classList.add("rating-count");const f=Math.floor(100001*Math.random()),L=f>1e3?(f/1e3).toFixed(1)+"k":f;E.innerText=`(${L}) 5 star ratings`,p.appendChild(E);const v=50,T=document.createElement("p"),C=r.description;if(C.length>v){const R=C.substring(0,v);T.innerText=R+"...",T.title=C}else T.innerText=C;p.appendChild(T);const b=document.createElement("h4"),x=parseFloat(r.price).toLocaleString("en-US");b.innerText=`UGX ${x}`,p.appendChild(b);const I=document.createElement("h6"),k=parseFloat(r.wholesalePrice).toLocaleString("en-US");I.innerHTML=` Wholesale UGX:<span class="value"> ${k}</span>`,I.classList.add("wholesale-price"),p.appendChild(I);const B=document.createElement("button");B.innerText="Add to Cart";const w=document.createElement("i");let S;w.classList.add("fas","fa-shopping-cart"),B.prepend(w);const U={};function s(e){const t=document.getElementById("cart-items"),n=document.createElement("div");n.classList.add("toggle-container");const a=document.createElement("p");a.innerText="Wholesale",n.appendChild(a);const s=document.createElement("input");s.type="checkbox",s.classList.add("toggle-switch");const d=document.createElement("div");function i(){parseInt(u.value)<4&&s.checked?(alert("The number of pieces should be more than 3 to enable wholesale."),s.checked=!1):(d.style.display="inline-block",h(e.name).then((t=>{d.style.display="none",async function(e,t){const n=parseFloat(S.innerText.replace("UGX ","")),a=parseInt(u.value);if(g=a*n,t){const t=await h(e.name);null!==t&&(S.innerText=`UGX ${t}`,S.dataset.price=t)}else S.innerText=`UGX ${e.price}`,S.dataset.price=e.price;const s=parseInt(u.value);(function(e){const t=document.getElementById("total-price"),n=parseFloat(t.innerText.replace("TOTAL: UGX ",""));t.innerText="TOTAL: UGX "+(n+e).toFixed(2),console.log("Updated Total:",n+e)})(s*parseFloat(S.dataset.price)-g),console.log("Updated Price:",parseFloat(S.dataset.price))}(e,s.checked)})).catch((e=>{console.error("Error fetching wholesale price:",e)})))}d.classList.add("loading-spinner"),n.appendChild(s),n.appendChild(d),s.addEventListener("change",i);const r=document.createElement("div");r.classList.add("cart-item");const p=document.createElement("div");p.classList.add("product-details"),p.appendChild(n);const m=document.createElement("h5");m.innerText=e.name,p.appendChild(m),S=document.createElement("h4"),S.innerText=`UGX ${e.price}`,S.dataset.price=e.price,p.appendChild(S);const u=document.createElement("input");u.type="number",u.value=1,u.min=1,u.classList.add("quantity-input"),u.addEventListener("input",(()=>{console.log("Input value:",u.value);parseInt(u.value)>3?(s.checked=!0,i()):(s.checked=!1,i());const t=parseFloat(S.innerText.replace("UGX ",""));!function(e,t,n){if(e&&!isNaN(e)){const a=e*t;U[n]=a,c(),console.log("Result of multiplication:",a)}else U[n]=0,c(),console.log("Result of multiplication:",0)}(u.value,t,e.name)})),p.appendChild(u);const y=document.createElement("button");async function h(e){const t=ref(database,"products/touches"),n=await get(child(t,e));if(n.exists()){const e=n.val().wholesalePrice;return null!==e?parseFloat(e):null}return null}y.innerText="Delete",y.classList.add("delete-button"),y.addEventListener("click",(()=>{t.removeChild(r),o(-1),c()})),p.appendChild(y),r.appendChild(p),t.appendChild(r),o(1),l(e.name);let g=0}function c(){const e=document.getElementsByClassName("cart-item");let t=0;for(let n=0;n<e.length;n++){const a=e[n],s=a.querySelector(".product-details .quantity-input"),c=a.querySelector(".product-details h4");t+=parseInt(s.value)*parseFloat(c.dataset.price)}document.getElementById("total-price").innerText="TOTAL: UGX "+t.toFixed(2),console.log("Updated Total:",t)}function o(e){const t=document.getElementById("cart-count"),n=parseInt(t.innerText)||0;t.innerText=n+e}function l(e){const t=document.getElementById("message-container");t.innerText=`${e} added to cart`,t.style.display="block",setTimeout((()=>{t.style.display="none"}),3e3)}B.addEventListener("click",(()=>{const e=document.getElementById("cart-container");e.style.display="block";document.getElementById("close-cart-btn").style.display="none",setTimeout((()=>{e.style.opacity="1"}),10),s(r),c()})),p.appendChild(B);const F=document.getElementById("open-cart-btn"),G=document.getElementById("close-cart-btn"),X=document.getElementById("cart-content"),q=document.getElementById("overlay4");X.style.display="none";const N=document.body;function d(){return 0===document.getElementsByClassName("cart-item").length}F.addEventListener("click",(()=>{if(d())return X.style.display="none",void l("Cart is Empty! Nothing is");q.style.display="block",X.style.display="block",F.style.display="none",G.style.display="inline-block",N.classList.add("no-scroll"),setTimeout((()=>{q.style.opacity="1",X.style.opacity="1"}),10)})),G.addEventListener("click",(()=>{q.style.opacity="0",X.style.opacity="0",setTimeout((()=>{X.style.display="none",G.style.display="none",F.style.display="inline-block",q.style.display="none",N.classList.remove("no-scroll")}),300)})),a.appendChild(p),e.style.display="none"}}))})),document.querySelector("#backcovers-link").addEventListener("click",(()=>{document.getElementById("products-list").innerHTML="";const e=document.getElementById("loader");e.style.display="block",get(BackCoversRef).then((t=>{const n=t.val(),a=document.getElementById("products-list");for(let i in n){const r=n[i],p=document.createElement("div");p.classList.add("card1");const m=document.createElement("div");m.classList.add("used-badge2"),m.innerText="Brand New",p.appendChild(m);const u=document.createElement("img");u.src=r.image,u.alt=r.name,u.classList.add("product-img");const y=document.createElement("div");y.classList.add("loader2"),y.innerHTML='<i class="fas fa-spinner fa-spin"></i>',p.appendChild(y),u.addEventListener("load",(()=>{y.style.display="none"})),u.addEventListener("click",(()=>{const e=document.querySelector(".modal"),t=document.querySelector("#modalImg");e.style.display="block",t.src=u.src})),p.appendChild(u),u.addEventListener("error",(()=>{y.style.display="none",u.src="img/no photo.jpg",u.alt="Image Load Error"})),p.appendChild(u);const h=document.createElement("h2");h.innerText=r.name,p.appendChild(h);const g=document.createElement("div");g.classList.add("stars");for(let $=0;$<5;$++){const M=document.createElement("span");M.classList.add("star"),M.innerHTML="&#9733;",g.appendChild(M)}p.appendChild(g);const E=document.createElement("div");E.classList.add("rating-count");const f=Math.floor(100001*Math.random()),L=f>1e3?(f/1e3).toFixed(1)+"k":f;E.innerText=`(${L}) 5 star ratings`,p.appendChild(E);const v=50,T=document.createElement("p"),C=r.description;if(C.length>v){const R=C.substring(0,v);T.innerText=R+"...",T.title=C}else T.innerText=C;p.appendChild(T);const b=document.createElement("h4"),x=parseFloat(r.price).toLocaleString("en-US");b.innerText=`UGX ${x}`,p.appendChild(b);const I=document.createElement("h6"),k=parseFloat(r.wholesalePrice).toLocaleString("en-US");I.innerHTML=` Wholesale UGX:<span class="value"> ${k}</span>`,I.classList.add("wholesale-price"),p.appendChild(I);const B=document.createElement("button");B.innerText="Add to Cart";const w=document.createElement("i");let S;w.classList.add("fas","fa-shopping-cart"),B.prepend(w);const U={};function s(e){const t=document.getElementById("cart-items"),n=document.createElement("div");n.classList.add("toggle-container");const a=document.createElement("p");a.innerText="Wholesale",n.appendChild(a);const s=document.createElement("input");s.type="checkbox",s.classList.add("toggle-switch");const d=document.createElement("div");function i(){parseInt(u.value)<4&&s.checked?(alert("The number of pieces should be more than 3 to enable wholesale."),s.checked=!1):(d.style.display="inline-block",h(e.name).then((t=>{d.style.display="none",async function(e,t){const n=parseFloat(S.innerText.replace("UGX ","")),a=parseInt(u.value);if(g=a*n,t){const t=await h(e.name);null!==t&&(S.innerText=`UGX ${t}`,S.dataset.price=t)}else S.innerText=`UGX ${e.price}`,S.dataset.price=e.price;const s=parseInt(u.value);(function(e){const t=document.getElementById("total-price"),n=parseFloat(t.innerText.replace("TOTAL: UGX ",""));t.innerText="TOTAL: UGX "+(n+e).toFixed(2),console.log("Updated Total:",n+e)})(s*parseFloat(S.dataset.price)-g),console.log("Updated Price:",parseFloat(S.dataset.price))}(e,s.checked)})).catch((e=>{console.error("Error fetching wholesale price:",e)})))}d.classList.add("loading-spinner"),n.appendChild(s),n.appendChild(d),s.addEventListener("change",i);const r=document.createElement("div");r.classList.add("cart-item");const p=document.createElement("div");p.classList.add("product-details"),p.appendChild(n);const m=document.createElement("h5");m.innerText=e.name,p.appendChild(m),S=document.createElement("h4"),S.innerText=`UGX ${e.price}`,S.dataset.price=e.price,p.appendChild(S);const u=document.createElement("input");u.type="number",u.value=1,u.min=1,u.classList.add("quantity-input"),u.addEventListener("input",(()=>{console.log("Input value:",u.value);parseInt(u.value)>3?(s.checked=!0,i()):(s.checked=!1,i());const t=parseFloat(S.innerText.replace("UGX ",""));!function(e,t,n){if(e&&!isNaN(e)){const a=e*t;U[n]=a,c(),console.log("Result of multiplication:",a)}else U[n]=0,c(),console.log("Result of multiplication:",0)}(u.value,t,e.name)})),p.appendChild(u);const y=document.createElement("button");async function h(e){const t=ref(database,"products/touches"),n=await get(child(t,e));if(n.exists()){const e=n.val().wholesalePrice;return null!==e?parseFloat(e):null}return null}y.innerText="Delete",y.classList.add("delete-button"),y.addEventListener("click",(()=>{t.removeChild(r),o(-1),c()})),p.appendChild(y),r.appendChild(p),t.appendChild(r),o(1),l(e.name);let g=0}function c(){const e=document.getElementsByClassName("cart-item");let t=0;for(let n=0;n<e.length;n++){const a=e[n],s=a.querySelector(".product-details .quantity-input"),c=a.querySelector(".product-details h4");t+=parseInt(s.value)*parseFloat(c.dataset.price)}document.getElementById("total-price").innerText="TOTAL: UGX "+t.toFixed(2),console.log("Updated Total:",t)}function o(e){const t=document.getElementById("cart-count"),n=parseInt(t.innerText)||0;t.innerText=n+e}function l(e){const t=document.getElementById("message-container");t.innerText=`${e} added to cart`,t.style.display="block",setTimeout((()=>{t.style.display="none"}),3e3)}B.addEventListener("click",(()=>{const e=document.getElementById("cart-container");e.style.display="block";document.getElementById("close-cart-btn").style.display="none",setTimeout((()=>{e.style.opacity="1"}),10),s(r),c()})),p.appendChild(B);const F=document.getElementById("open-cart-btn"),G=document.getElementById("close-cart-btn"),X=document.getElementById("cart-content"),q=document.getElementById("overlay4");X.style.display="none";const N=document.body;function d(){return 0===document.getElementsByClassName("cart-item").length}F.addEventListener("click",(()=>{if(d())return X.style.display="none",void l("Cart is Empty! Nothing is");q.style.display="block",X.style.display="block",F.style.display="none",G.style.display="inline-block",N.classList.add("no-scroll"),setTimeout((()=>{q.style.opacity="1",X.style.opacity="1"}),10)})),G.addEventListener("click",(()=>{q.style.opacity="0",X.style.opacity="0",setTimeout((()=>{X.style.display="none",G.style.display="none",F.style.display="inline-block",q.style.display="none",N.classList.remove("no-scroll")}),300)})),a.appendChild(p),e.style.display="none"}}))})),document.querySelector("#chesis-link").addEventListener("click",(()=>{document.getElementById("products-list").innerHTML="";const e=document.getElementById("loader");e.style.display="block",get(ChesisRef).then((t=>{const n=t.val(),a=document.getElementById("products-list");for(let i in n){const r=n[i],p=document.createElement("div");p.classList.add("card1");const m=document.createElement("div");m.classList.add("used-badge2"),m.innerText="Brand New",p.appendChild(m);const u=document.createElement("img");u.src=r.image,u.alt=r.name,u.classList.add("product-img");const y=document.createElement("div");y.classList.add("loader2"),y.innerHTML='<i class="fas fa-spinner fa-spin"></i>',p.appendChild(y),u.addEventListener("load",(()=>{y.style.display="none"})),u.addEventListener("click",(()=>{const e=document.querySelector(".modal"),t=document.querySelector("#modalImg");e.style.display="block",t.src=u.src})),p.appendChild(u),u.addEventListener("error",(()=>{y.style.display="none",u.src="img/no photo.jpg",u.alt="Image Load Error"})),p.appendChild(u);const h=document.createElement("h2");h.innerText=r.name,p.appendChild(h);const g=document.createElement("div");g.classList.add("stars");for(let $=0;$<5;$++){const M=document.createElement("span");M.classList.add("star"),M.innerHTML="&#9733;",g.appendChild(M)}p.appendChild(g);const E=document.createElement("div");E.classList.add("rating-count");const f=Math.floor(100001*Math.random()),L=f>1e3?(f/1e3).toFixed(1)+"k":f;E.innerText=`(${L}) 5 star ratings`,p.appendChild(E);const v=50,T=document.createElement("p"),C=r.description;if(C.length>v){const R=C.substring(0,v);T.innerText=R+"...",T.title=C}else T.innerText=C;p.appendChild(T);const b=document.createElement("h4"),x=parseFloat(r.price).toLocaleString("en-US");b.innerText=`UGX ${x}`,p.appendChild(b);const I=document.createElement("h6"),k=parseFloat(r.wholesalePrice).toLocaleString("en-US");I.innerHTML=` Wholesale UGX:<span class="value"> ${k}</span>`,I.classList.add("wholesale-price"),p.appendChild(I);const B=document.createElement("button");B.innerText="Add to Cart";const w=document.createElement("i");let S;w.classList.add("fas","fa-shopping-cart"),B.prepend(w);const U={};function s(e){const t=document.getElementById("cart-items"),n=document.createElement("div");n.classList.add("toggle-container");const a=document.createElement("p");a.innerText="Wholesale",n.appendChild(a);const s=document.createElement("input");s.type="checkbox",s.classList.add("toggle-switch");const d=document.createElement("div");function i(){parseInt(u.value)<4&&s.checked?(alert("The number of pieces should be more than 3 to enable wholesale."),s.checked=!1):(d.style.display="inline-block",h(e.name).then((t=>{d.style.display="none",async function(e,t){const n=parseFloat(S.innerText.replace("UGX ","")),a=parseInt(u.value);if(g=a*n,t){const t=await h(e.name);null!==t&&(S.innerText=`UGX ${t}`,S.dataset.price=t)}else S.innerText=`UGX ${e.price}`,S.dataset.price=e.price;const s=parseInt(u.value);(function(e){const t=document.getElementById("total-price"),n=parseFloat(t.innerText.replace("TOTAL: UGX ",""));t.innerText="TOTAL: UGX "+(n+e).toFixed(2),console.log("Updated Total:",n+e)})(s*parseFloat(S.dataset.price)-g),console.log("Updated Price:",parseFloat(S.dataset.price))}(e,s.checked)})).catch((e=>{console.error("Error fetching wholesale price:",e)})))}d.classList.add("loading-spinner"),n.appendChild(s),n.appendChild(d),s.addEventListener("change",i);const r=document.createElement("div");r.classList.add("cart-item");const p=document.createElement("div");p.classList.add("product-details"),p.appendChild(n);const m=document.createElement("h5");m.innerText=e.name,p.appendChild(m),S=document.createElement("h4"),S.innerText=`UGX ${e.price}`,S.dataset.price=e.price,p.appendChild(S);const u=document.createElement("input");u.type="number",u.value=1,u.min=1,u.classList.add("quantity-input"),u.addEventListener("input",(()=>{console.log("Input value:",u.value);parseInt(u.value)>3?(s.checked=!0,i()):(s.checked=!1,i());const t=parseFloat(S.innerText.replace("UGX ",""));!function(e,t,n){if(e&&!isNaN(e)){const a=e*t;U[n]=a,c(),console.log("Result of multiplication:",a)}else U[n]=0,c(),console.log("Result of multiplication:",0)}(u.value,t,e.name)})),p.appendChild(u);const y=document.createElement("button");async function h(e){const t=ref(database,"products/touches"),n=await get(child(t,e));if(n.exists()){const e=n.val().wholesalePrice;return null!==e?parseFloat(e):null}return null}y.innerText="Delete",y.classList.add("delete-button"),y.addEventListener("click",(()=>{t.removeChild(r),o(-1),c()})),p.appendChild(y),r.appendChild(p),t.appendChild(r),o(1),l(e.name);let g=0}function c(){const e=document.getElementsByClassName("cart-item");let t=0;for(let n=0;n<e.length;n++){const a=e[n],s=a.querySelector(".product-details .quantity-input"),c=a.querySelector(".product-details h4");t+=parseInt(s.value)*parseFloat(c.dataset.price)}document.getElementById("total-price").innerText="TOTAL: UGX "+t.toFixed(2),console.log("Updated Total:",t)}function o(e){const t=document.getElementById("cart-count"),n=parseInt(t.innerText)||0;t.innerText=n+e}function l(e){const t=document.getElementById("message-container");t.innerText=`${e} added to cart`,t.style.display="block",setTimeout((()=>{t.style.display="none"}),3e3)}B.addEventListener("click",(()=>{const e=document.getElementById("cart-container");e.style.display="block";document.getElementById("close-cart-btn").style.display="none",setTimeout((()=>{e.style.opacity="1"}),10),s(r),c()})),p.appendChild(B);const F=document.getElementById("open-cart-btn"),G=document.getElementById("close-cart-btn"),X=document.getElementById("cart-content"),q=document.getElementById("overlay4");X.style.display="none";const N=document.body;function d(){return 0===document.getElementsByClassName("cart-item").length}F.addEventListener("click",(()=>{if(d())return X.style.display="none",void l("Cart is Empty! Nothing is");q.style.display="block",X.style.display="block",F.style.display="none",G.style.display="inline-block",N.classList.add("no-scroll"),setTimeout((()=>{q.style.opacity="1",X.style.opacity="1"}),10)})),G.addEventListener("click",(()=>{q.style.opacity="0",X.style.opacity="0",setTimeout((()=>{X.style.display="none",G.style.display="none",F.style.display="inline-block",q.style.display="none",N.classList.remove("no-scroll")}),300)})),a.appendChild(p),e.style.display="none"}}))})),document.querySelector("#fingerPrint-link").addEventListener("click",(()=>{document.getElementById("products-list").innerHTML="";const e=document.getElementById("loader");e.style.display="block",get(fingerPrintsRef).then((t=>{const n=t.val(),a=document.getElementById("products-list");for(let i in n){const r=n[i],p=document.createElement("div");p.classList.add("card1");const m=document.createElement("div");m.classList.add("used-badge2"),m.innerText="Brand New",p.appendChild(m);const u=document.createElement("img");u.src=r.image,u.alt=r.name,u.classList.add("product-img");const y=document.createElement("div");y.classList.add("loader2"),y.innerHTML='<i class="fas fa-spinner fa-spin"></i>',p.appendChild(y),u.addEventListener("load",(()=>{y.style.display="none"})),u.addEventListener("click",(()=>{const e=document.querySelector(".modal"),t=document.querySelector("#modalImg");e.style.display="block",t.src=u.src})),p.appendChild(u),u.addEventListener("error",(()=>{y.style.display="none",u.src="img/no photo.jpg",u.alt="Image Load Error"})),p.appendChild(u);const h=document.createElement("h2");h.innerText=r.name,p.appendChild(h);const g=document.createElement("div");g.classList.add("stars");for(let $=0;$<5;$++){const M=document.createElement("span");M.classList.add("star"),M.innerHTML="&#9733;",g.appendChild(M)}p.appendChild(g);const E=document.createElement("div");E.classList.add("rating-count");const f=Math.floor(100001*Math.random()),L=f>1e3?(f/1e3).toFixed(1)+"k":f;E.innerText=`(${L}) 5 star ratings`,p.appendChild(E);const v=50,T=document.createElement("p"),C=r.description;if(C.length>v){const R=C.substring(0,v);T.innerText=R+"...",T.title=C}else T.innerText=C;p.appendChild(T);const b=document.createElement("h4"),x=parseFloat(r.price).toLocaleString("en-US");b.innerText=`UGX ${x}`,p.appendChild(b);const I=document.createElement("h6"),k=parseFloat(r.wholesalePrice).toLocaleString("en-US");I.innerHTML=` Wholesale UGX:<span class="value"> ${k}</span>`,I.classList.add("wholesale-price"),p.appendChild(I);const B=document.createElement("button");B.innerText="Add to Cart";const w=document.createElement("i");let S;w.classList.add("fas","fa-shopping-cart"),B.prepend(w);const U={};function s(e){const t=document.getElementById("cart-items"),n=document.createElement("div");n.classList.add("toggle-container");const a=document.createElement("p");a.innerText="Wholesale",n.appendChild(a);const s=document.createElement("input");s.type="checkbox",s.classList.add("toggle-switch");const d=document.createElement("div");function i(){parseInt(u.value)<4&&s.checked?(alert("The number of pieces should be more than 3 to enable wholesale."),s.checked=!1):(d.style.display="inline-block",h(e.name).then((t=>{d.style.display="none",async function(e,t){const n=parseFloat(S.innerText.replace("UGX ","")),a=parseInt(u.value);if(g=a*n,t){const t=await h(e.name);null!==t&&(S.innerText=`UGX ${t}`,S.dataset.price=t)}else S.innerText=`UGX ${e.price}`,S.dataset.price=e.price;const s=parseInt(u.value);(function(e){const t=document.getElementById("total-price"),n=parseFloat(t.innerText.replace("TOTAL: UGX ",""));t.innerText="TOTAL: UGX "+(n+e).toFixed(2),console.log("Updated Total:",n+e)})(s*parseFloat(S.dataset.price)-g),console.log("Updated Price:",parseFloat(S.dataset.price))}(e,s.checked)})).catch((e=>{console.error("Error fetching wholesale price:",e)})))}d.classList.add("loading-spinner"),n.appendChild(s),n.appendChild(d),s.addEventListener("change",i);const r=document.createElement("div");r.classList.add("cart-item");const p=document.createElement("div");p.classList.add("product-details"),p.appendChild(n);const m=document.createElement("h5");m.innerText=e.name,p.appendChild(m),S=document.createElement("h4"),S.innerText=`UGX ${e.price}`,S.dataset.price=e.price,p.appendChild(S);const u=document.createElement("input");u.type="number",u.value=1,u.min=1,u.classList.add("quantity-input"),u.addEventListener("input",(()=>{console.log("Input value:",u.value);parseInt(u.value)>3?(s.checked=!0,i()):(s.checked=!1,i());const t=parseFloat(S.innerText.replace("UGX ",""));!function(e,t,n){if(e&&!isNaN(e)){const a=e*t;U[n]=a,c(),console.log("Result of multiplication:",a)}else U[n]=0,c(),console.log("Result of multiplication:",0)}(u.value,t,e.name)})),p.appendChild(u);const y=document.createElement("button");async function h(e){const t=ref(database,"products/touches"),n=await get(child(t,e));if(n.exists()){const e=n.val().wholesalePrice;return null!==e?parseFloat(e):null}return null}y.innerText="Delete",y.classList.add("delete-button"),y.addEventListener("click",(()=>{t.removeChild(r),o(-1),c()})),p.appendChild(y),r.appendChild(p),t.appendChild(r),o(1),l(e.name);let g=0}function c(){const e=document.getElementsByClassName("cart-item");let t=0;for(let n=0;n<e.length;n++){const a=e[n],s=a.querySelector(".product-details .quantity-input"),c=a.querySelector(".product-details h4");t+=parseInt(s.value)*parseFloat(c.dataset.price)}document.getElementById("total-price").innerText="TOTAL: UGX "+t.toFixed(2),console.log("Updated Total:",t)}function o(e){const t=document.getElementById("cart-count"),n=parseInt(t.innerText)||0;t.innerText=n+e}function l(e){const t=document.getElementById("message-container");t.innerText=`${e} added to cart`,t.style.display="block",setTimeout((()=>{t.style.display="none"}),3e3)}B.addEventListener("click",(()=>{const e=document.getElementById("cart-container");e.style.display="block";document.getElementById("close-cart-btn").style.display="none",setTimeout((()=>{e.style.opacity="1"}),10),s(r),c()})),p.appendChild(B);const F=document.getElementById("open-cart-btn"),G=document.getElementById("close-cart-btn"),X=document.getElementById("cart-content"),q=document.getElementById("overlay4");X.style.display="none";const N=document.body;function d(){return 0===document.getElementsByClassName("cart-item").length}F.addEventListener("click",(()=>{if(d())return X.style.display="none",void l("Cart is Empty! Nothing is");q.style.display="block",X.style.display="block",F.style.display="none",G.style.display="inline-block",N.classList.add("no-scroll"),setTimeout((()=>{q.style.opacity="1",X.style.opacity="1"}),10)})),G.addEventListener("click",(()=>{q.style.opacity="0",X.style.opacity="0",setTimeout((()=>{X.style.display="none",G.style.display="none",F.style.display="inline-block",q.style.display="none",N.classList.remove("no-scroll")}),300)})),a.appendChild(p),e.style.display="none"}}))})),document.querySelector("#buttons-link").addEventListener("click",(()=>{document.getElementById("products-list").innerHTML="";const e=document.getElementById("loader");e.style.display="block",get(buttonsRef).then((t=>{const n=t.val(),a=document.getElementById("products-list");for(let i in n){const r=n[i],p=document.createElement("div");p.classList.add("card1");const m=document.createElement("div");m.classList.add("used-badge2"),m.innerText="Brand New",p.appendChild(m);const u=document.createElement("img");u.src=r.image,u.alt=r.name,u.classList.add("product-img");const y=document.createElement("div");y.classList.add("loader2"),y.innerHTML='<i class="fas fa-spinner fa-spin"></i>',p.appendChild(y),u.addEventListener("load",(()=>{y.style.display="none"})),u.addEventListener("click",(()=>{const e=document.querySelector(".modal"),t=document.querySelector("#modalImg");e.style.display="block",t.src=u.src})),p.appendChild(u),u.addEventListener("error",(()=>{y.style.display="none",u.src="img/no photo.jpg",u.alt="Image Load Error"})),p.appendChild(u);const h=document.createElement("h2");h.innerText=r.name,p.appendChild(h);const g=document.createElement("div");g.classList.add("stars");for(let $=0;$<5;$++){const M=document.createElement("span");M.classList.add("star"),M.innerHTML="&#9733;",g.appendChild(M)}p.appendChild(g);const E=document.createElement("div");E.classList.add("rating-count");const f=Math.floor(100001*Math.random()),L=f>1e3?(f/1e3).toFixed(1)+"k":f;E.innerText=`(${L}) 5 star ratings`,p.appendChild(E);const v=50,T=document.createElement("p"),C=r.description;if(C.length>v){const R=C.substring(0,v);T.innerText=R+"...",T.title=C}else T.innerText=C;p.appendChild(T);const b=document.createElement("h4"),x=parseFloat(r.price).toLocaleString("en-US");b.innerText=`UGX ${x}`,p.appendChild(b);const I=document.createElement("h6"),k=parseFloat(r.wholesalePrice).toLocaleString("en-US");I.innerHTML=` Wholesale UGX:<span class="value"> ${k}</span>`,I.classList.add("wholesale-price"),p.appendChild(I);const B=document.createElement("button");B.innerText="Add to Cart";const w=document.createElement("i");let S;w.classList.add("fas","fa-shopping-cart"),B.prepend(w);const U={};function s(e){const t=document.getElementById("cart-items"),n=document.createElement("div");n.classList.add("toggle-container");const a=document.createElement("p");a.innerText="Wholesale",n.appendChild(a);const s=document.createElement("input");s.type="checkbox",s.classList.add("toggle-switch");const d=document.createElement("div");function i(){parseInt(u.value)<4&&s.checked?(alert("The number of pieces should be more than 3 to enable wholesale."),s.checked=!1):(d.style.display="inline-block",h(e.name).then((t=>{d.style.display="none",async function(e,t){const n=parseFloat(S.innerText.replace("UGX ","")),a=parseInt(u.value);if(g=a*n,t){const t=await h(e.name);null!==t&&(S.innerText=`UGX ${t}`,S.dataset.price=t)}else S.innerText=`UGX ${e.price}`,S.dataset.price=e.price;const s=parseInt(u.value);(function(e){const t=document.getElementById("total-price"),n=parseFloat(t.innerText.replace("TOTAL: UGX ",""));t.innerText="TOTAL: UGX "+(n+e).toFixed(2),console.log("Updated Total:",n+e)})(s*parseFloat(S.dataset.price)-g),console.log("Updated Price:",parseFloat(S.dataset.price))}(e,s.checked)})).catch((e=>{console.error("Error fetching wholesale price:",e)})))}d.classList.add("loading-spinner"),n.appendChild(s),n.appendChild(d),s.addEventListener("change",i);const r=document.createElement("div");r.classList.add("cart-item");const p=document.createElement("div");p.classList.add("product-details"),p.appendChild(n);const m=document.createElement("h5");m.innerText=e.name,p.appendChild(m),S=document.createElement("h4"),S.innerText=`UGX ${e.price}`,S.dataset.price=e.price,p.appendChild(S);const u=document.createElement("input");u.type="number",u.value=1,u.min=1,u.classList.add("quantity-input"),u.addEventListener("input",(()=>{console.log("Input value:",u.value);parseInt(u.value)>3?(s.checked=!0,i()):(s.checked=!1,i());const t=parseFloat(S.innerText.replace("UGX ",""));!function(e,t,n){if(e&&!isNaN(e)){const a=e*t;U[n]=a,c(),console.log("Result of multiplication:",a)}else U[n]=0,c(),console.log("Result of multiplication:",0)}(u.value,t,e.name)})),p.appendChild(u);const y=document.createElement("button");async function h(e){const t=ref(database,"products/touches"),n=await get(child(t,e));if(n.exists()){const e=n.val().wholesalePrice;return null!==e?parseFloat(e):null}return null}y.innerText="Delete",y.classList.add("delete-button"),y.addEventListener("click",(()=>{t.removeChild(r),o(-1),c()})),p.appendChild(y),r.appendChild(p),t.appendChild(r),o(1),l(e.name);let g=0}function c(){const e=document.getElementsByClassName("cart-item");let t=0;for(let n=0;n<e.length;n++){const a=e[n],s=a.querySelector(".product-details .quantity-input"),c=a.querySelector(".product-details h4");t+=parseInt(s.value)*parseFloat(c.dataset.price)}document.getElementById("total-price").innerText="TOTAL: UGX "+t.toFixed(2),console.log("Updated Total:",t)}function o(e){const t=document.getElementById("cart-count"),n=parseInt(t.innerText)||0;t.innerText=n+e}function l(e){const t=document.getElementById("message-container");t.innerText=`${e} added to cart`,t.style.display="block",setTimeout((()=>{t.style.display="none"}),3e3)}B.addEventListener("click",(()=>{const e=document.getElementById("cart-container");e.style.display="block";document.getElementById("close-cart-btn").style.display="none",setTimeout((()=>{e.style.opacity="1"}),10),s(r),c()})),p.appendChild(B);const F=document.getElementById("open-cart-btn"),G=document.getElementById("close-cart-btn"),X=document.getElementById("cart-content"),q=document.getElementById("overlay4");X.style.display="none";const N=document.body;function d(){return 0===document.getElementsByClassName("cart-item").length}F.addEventListener("click",(()=>{if(d())return X.style.display="none",void l("Cart is Empty! Nothing is");q.style.display="block",X.style.display="block",F.style.display="none",G.style.display="inline-block",N.classList.add("no-scroll"),setTimeout((()=>{q.style.opacity="1",X.style.opacity="1"}),10)})),G.addEventListener("click",(()=>{q.style.opacity="0",X.style.opacity="0",setTimeout((()=>{X.style.display="none",G.style.display="none",F.style.display="inline-block",q.style.display="none",N.classList.remove("no-scroll")}),300)})),a.appendChild(p),e.style.display="none"}}))})),document.querySelector("#fibres-link").addEventListener("click",(()=>{document.getElementById("products-list").innerHTML="";const e=document.getElementById("loader");e.style.display="block",get(fibresRef).then((t=>{const n=t.val(),a=document.getElementById("products-list");for(let i in n){const r=n[i],p=document.createElement("div");p.classList.add("card1");const m=document.createElement("div");m.classList.add("used-badge2"),m.innerText="Brand New",p.appendChild(m);const u=document.createElement("img");u.src=r.image,u.alt=r.name,u.classList.add("product-img");const y=document.createElement("div");y.classList.add("loader2"),y.innerHTML='<i class="fas fa-spinner fa-spin"></i>',p.appendChild(y),u.addEventListener("load",(()=>{y.style.display="none"})),u.addEventListener("click",(()=>{const e=document.querySelector(".modal"),t=document.querySelector("#modalImg");e.style.display="block",t.src=u.src})),p.appendChild(u),u.addEventListener("error",(()=>{y.style.display="none",u.src="img/no photo.jpg",u.alt="Image Load Error"})),p.appendChild(u);const h=document.createElement("h2");h.innerText=r.name,p.appendChild(h);const g=document.createElement("div");g.classList.add("stars");for(let $=0;$<5;$++){const M=document.createElement("span");M.classList.add("star"),M.innerHTML="&#9733;",g.appendChild(M)}p.appendChild(g);const E=document.createElement("div");E.classList.add("rating-count");const f=Math.floor(100001*Math.random()),L=f>1e3?(f/1e3).toFixed(1)+"k":f;E.innerText=`(${L}) 5 star ratings`,p.appendChild(E);const v=50,T=document.createElement("p"),C=r.description;if(C.length>v){const R=C.substring(0,v);T.innerText=R+"...",T.title=C}else T.innerText=C;p.appendChild(T);const b=document.createElement("h4"),x=parseFloat(r.price).toLocaleString("en-US");b.innerText=`UGX ${x}`,p.appendChild(b);const I=document.createElement("h6"),k=parseFloat(r.wholesalePrice).toLocaleString("en-US");I.innerHTML=` Wholesale UGX:<span class="value"> ${k}</span>`,I.classList.add("wholesale-price"),p.appendChild(I);const B=document.createElement("button");B.innerText="Add to Cart";const w=document.createElement("i");let S;w.classList.add("fas","fa-shopping-cart"),B.prepend(w);const U={};function s(e){const t=document.getElementById("cart-items"),n=document.createElement("div");n.classList.add("toggle-container");const a=document.createElement("p");a.innerText="Wholesale",n.appendChild(a);const s=document.createElement("input");s.type="checkbox",s.classList.add("toggle-switch");const d=document.createElement("div");function i(){parseInt(u.value)<4&&s.checked?(alert("The number of pieces should be more than 3 to enable wholesale."),s.checked=!1):(d.style.display="inline-block",h(e.name).then((t=>{d.style.display="none",async function(e,t){const n=parseFloat(S.innerText.replace("UGX ","")),a=parseInt(u.value);if(g=a*n,t){const t=await h(e.name);null!==t&&(S.innerText=`UGX ${t}`,S.dataset.price=t)}else S.innerText=`UGX ${e.price}`,S.dataset.price=e.price;const s=parseInt(u.value);(function(e){const t=document.getElementById("total-price"),n=parseFloat(t.innerText.replace("TOTAL: UGX ",""));t.innerText="TOTAL: UGX "+(n+e).toFixed(2),console.log("Updated Total:",n+e)})(s*parseFloat(S.dataset.price)-g),console.log("Updated Price:",parseFloat(S.dataset.price))}(e,s.checked)})).catch((e=>{console.error("Error fetching wholesale price:",e)})))}d.classList.add("loading-spinner"),n.appendChild(s),n.appendChild(d),s.addEventListener("change",i);const r=document.createElement("div");r.classList.add("cart-item");const p=document.createElement("div");p.classList.add("product-details"),p.appendChild(n);const m=document.createElement("h5");m.innerText=e.name,p.appendChild(m),S=document.createElement("h4"),S.innerText=`UGX ${e.price}`,S.dataset.price=e.price,p.appendChild(S);const u=document.createElement("input");u.type="number",u.value=1,u.min=1,u.classList.add("quantity-input"),u.addEventListener("input",(()=>{console.log("Input value:",u.value);parseInt(u.value)>3?(s.checked=!0,i()):(s.checked=!1,i());const t=parseFloat(S.innerText.replace("UGX ",""));!function(e,t,n){if(e&&!isNaN(e)){const a=e*t;U[n]=a,c(),console.log("Result of multiplication:",a)}else U[n]=0,c(),console.log("Result of multiplication:",0)}(u.value,t,e.name)})),p.appendChild(u);const y=document.createElement("button");async function h(e){const t=ref(database,"products/touches"),n=await get(child(t,e));if(n.exists()){const e=n.val().wholesalePrice;return null!==e?parseFloat(e):null}return null}y.innerText="Delete",y.classList.add("delete-button"),y.addEventListener("click",(()=>{t.removeChild(r),o(-1),c()})),p.appendChild(y),r.appendChild(p),t.appendChild(r),o(1),l(e.name);let g=0}function c(){const e=document.getElementsByClassName("cart-item");let t=0;for(let n=0;n<e.length;n++){const a=e[n],s=a.querySelector(".product-details .quantity-input"),c=a.querySelector(".product-details h4");t+=parseInt(s.value)*parseFloat(c.dataset.price)}document.getElementById("total-price").innerText="TOTAL: UGX "+t.toFixed(2),console.log("Updated Total:",t)}function o(e){const t=document.getElementById("cart-count"),n=parseInt(t.innerText)||0;t.innerText=n+e}function l(e){const t=document.getElementById("message-container");t.innerText=`${e} added to cart`,t.style.display="block",setTimeout((()=>{t.style.display="none"}),3e3)}B.addEventListener("click",(()=>{const e=document.getElementById("cart-container");e.style.display="block";document.getElementById("close-cart-btn").style.display="none",setTimeout((()=>{e.style.opacity="1"}),10),s(r),c()})),p.appendChild(B);const F=document.getElementById("open-cart-btn"),G=document.getElementById("close-cart-btn"),X=document.getElementById("cart-content"),q=document.getElementById("overlay4");X.style.display="none";const N=document.body;function d(){return 0===document.getElementsByClassName("cart-item").length}F.addEventListener("click",(()=>{if(d())return X.style.display="none",void l("Cart is Empty! Nothing is");q.style.display="block",X.style.display="block",F.style.display="none",G.style.display="inline-block",N.classList.add("no-scroll"),setTimeout((()=>{q.style.opacity="1",X.style.opacity="1"}),10)})),G.addEventListener("click",(()=>{q.style.opacity="0",X.style.opacity="0",setTimeout((()=>{X.style.display="none",G.style.display="none",F.style.display="inline-block",q.style.display="none",N.classList.remove("no-scroll")}),300)})),a.appendChild(p),e.style.display="none"}}))})),document.querySelector("#electronics-link").addEventListener("click",(()=>{document.getElementById("products-list").innerHTML="";const e=document.getElementById("loader");e.style.display="block",get(electronicsRef).then((t=>{const n=t.val(),a=document.getElementById("products-list");for(let i in n){const r=n[i],p=document.createElement("div");p.classList.add("card1");const m=document.createElement("div");m.classList.add("used-badge2"),m.innerText="Brand New",p.appendChild(m);const u=document.createElement("img");u.src=r.image,u.alt=r.name,u.classList.add("product-img");const y=document.createElement("div");y.classList.add("loader2"),y.innerHTML='<i class="fas fa-spinner fa-spin"></i>',p.appendChild(y),u.addEventListener("load",(()=>{y.style.display="none"})),u.addEventListener("click",(()=>{const e=document.querySelector(".modal"),t=document.querySelector("#modalImg");e.style.display="block",t.src=u.src})),p.appendChild(u),u.addEventListener("error",(()=>{y.style.display="none",u.src="img/no photo.jpg",u.alt="Image Load Error"})),p.appendChild(u);const h=document.createElement("h2");h.innerText=r.name,p.appendChild(h);const g=document.createElement("div");g.classList.add("stars");for(let $=0;$<5;$++){const M=document.createElement("span");M.classList.add("star"),M.innerHTML="&#9733;",g.appendChild(M)}p.appendChild(g);const E=document.createElement("div");E.classList.add("rating-count");const f=Math.floor(100001*Math.random()),L=f>1e3?(f/1e3).toFixed(1)+"k":f;E.innerText=`(${L}) 5 star ratings`,p.appendChild(E);const v=50,T=document.createElement("p"),C=r.description;if(C.length>v){const R=C.substring(0,v);T.innerText=R+"...",T.title=C}else T.innerText=C;p.appendChild(T);const b=document.createElement("h4"),x=parseFloat(r.price).toLocaleString("en-US");b.innerText=`UGX ${x}`,p.appendChild(b);const I=document.createElement("h6"),k=parseFloat(r.wholesalePrice).toLocaleString("en-US");I.innerHTML=` Wholesale UGX:<span class="value"> ${k}</span>`,I.classList.add("wholesale-price"),p.appendChild(I);const B=document.createElement("button");B.innerText="Add to Cart";const w=document.createElement("i");let S;w.classList.add("fas","fa-shopping-cart"),B.prepend(w);const U={};function s(e){const t=document.getElementById("cart-items"),n=document.createElement("div");n.classList.add("toggle-container");const a=document.createElement("p");a.innerText="Wholesale",n.appendChild(a);const s=document.createElement("input");s.type="checkbox",s.classList.add("toggle-switch");const d=document.createElement("div");function i(){parseInt(u.value)<4&&s.checked?(alert("The number of pieces should be more than 3 to enable wholesale."),s.checked=!1):(d.style.display="inline-block",h(e.name).then((t=>{d.style.display="none",async function(e,t){const n=parseFloat(S.innerText.replace("UGX ","")),a=parseInt(u.value);if(g=a*n,t){const t=await h(e.name);null!==t&&(S.innerText=`UGX ${t}`,S.dataset.price=t)}else S.innerText=`UGX ${e.price}`,S.dataset.price=e.price;const s=parseInt(u.value);(function(e){const t=document.getElementById("total-price"),n=parseFloat(t.innerText.replace("TOTAL: UGX ",""));t.innerText="TOTAL: UGX "+(n+e).toFixed(2),console.log("Updated Total:",n+e)})(s*parseFloat(S.dataset.price)-g),console.log("Updated Price:",parseFloat(S.dataset.price))}(e,s.checked)})).catch((e=>{console.error("Error fetching wholesale price:",e)})))}d.classList.add("loading-spinner"),n.appendChild(s),n.appendChild(d),s.addEventListener("change",i);const r=document.createElement("div");r.classList.add("cart-item");const p=document.createElement("div");p.classList.add("product-details"),p.appendChild(n);const m=document.createElement("h5");m.innerText=e.name,p.appendChild(m),S=document.createElement("h4"),S.innerText=`UGX ${e.price}`,S.dataset.price=e.price,p.appendChild(S);const u=document.createElement("input");u.type="number",u.value=1,u.min=1,u.classList.add("quantity-input"),u.addEventListener("input",(()=>{console.log("Input value:",u.value);parseInt(u.value)>3?(s.checked=!0,i()):(s.checked=!1,i());const t=parseFloat(S.innerText.replace("UGX ",""));!function(e,t,n){if(e&&!isNaN(e)){const a=e*t;U[n]=a,c(),console.log("Result of multiplication:",a)}else U[n]=0,c(),console.log("Result of multiplication:",0)}(u.value,t,e.name)})),p.appendChild(u);const y=document.createElement("button");async function h(e){const t=ref(database,"products/electronics"),n=await get(child(t,e));if(n.exists()){const e=n.val().wholesalePrice;return null!==e?parseFloat(e):null}return null}y.innerText="Delete",y.classList.add("delete-button"),y.addEventListener("click",(()=>{t.removeChild(r),o(-1),c()})),p.appendChild(y),r.appendChild(p),t.appendChild(r),o(1),l(e.name);let g=0}function c(){const e=document.getElementsByClassName("cart-item");let t=0;for(let n=0;n<e.length;n++){const a=e[n],s=a.querySelector(".product-details .quantity-input"),c=a.querySelector(".product-details h4");t+=parseInt(s.value)*parseFloat(c.dataset.price)}document.getElementById("total-price").innerText="TOTAL: UGX "+t.toFixed(2),console.log("Updated Total:",t)}function o(e){const t=document.getElementById("cart-count"),n=parseInt(t.innerText)||0;t.innerText=n+e}function l(e){const t=document.getElementById("message-container");t.innerText=`${e} added to cart`,t.style.display="block",setTimeout((()=>{t.style.display="none"}),3e3)}B.addEventListener("click",(()=>{const e=document.getElementById("cart-container");e.style.display="block";document.getElementById("close-cart-btn").style.display="none",setTimeout((()=>{e.style.opacity="1"}),10),s(r),c()})),p.appendChild(B);const F=document.getElementById("open-cart-btn"),G=document.getElementById("close-cart-btn"),X=document.getElementById("cart-content"),q=document.getElementById("overlay4");X.style.display="none";const N=document.body;function d(){return 0===document.getElementsByClassName("cart-item").length}F.addEventListener("click",(()=>{if(d())return X.style.display="none",void l("Cart is Empty! Nothing is");q.style.display="block",X.style.display="block",F.style.display="none",G.style.display="inline-block",N.classList.add("no-scroll"),setTimeout((()=>{q.style.opacity="1",X.style.opacity="1"}),10)})),G.addEventListener("click",(()=>{q.style.opacity="0",X.style.opacity="0",setTimeout((()=>{X.style.display="none",G.style.display="none",F.style.display="inline-block",q.style.display="none",N.classList.remove("no-scroll")}),300)})),a.appendChild(p),e.style.display="none"}}))})),document.querySelector("#accessories-link").addEventListener("click",(()=>{document.getElementById("products-list").innerHTML="";const e=document.getElementById("loader");e.style.display="block",get(accessoriesRef).then((t=>{const n=t.val(),a=document.getElementById("products-list");for(let i in n){const r=n[i],p=document.createElement("div");p.classList.add("card1");const m=document.createElement("div");m.classList.add("used-badge2"),m.innerText="Brand New",p.appendChild(m);const u=document.createElement("img");u.src=r.image,u.alt=r.name,u.classList.add("product-img");const y=document.createElement("div");y.classList.add("loader2"),y.innerHTML='<i class="fas fa-spinner fa-spin"></i>',p.appendChild(y),u.addEventListener("load",(()=>{y.style.display="none"})),u.addEventListener("click",(()=>{const e=document.querySelector(".modal"),t=document.querySelector("#modalImg");e.style.display="block",t.src=u.src})),p.appendChild(u),u.addEventListener("error",(()=>{y.style.display="none",u.src="img/no photo.jpg",u.alt="Image Load Error"})),p.appendChild(u);const h=document.createElement("h2");h.innerText=r.name,p.appendChild(h);const g=document.createElement("div");g.classList.add("stars");for(let $=0;$<5;$++){const M=document.createElement("span");M.classList.add("star"),M.innerHTML="&#9733;",g.appendChild(M)}p.appendChild(g);const E=document.createElement("div");E.classList.add("rating-count");const f=Math.floor(100001*Math.random()),L=f>1e3?(f/1e3).toFixed(1)+"k":f;E.innerText=`(${L}) 5 star ratings`,p.appendChild(E);const v=50,T=document.createElement("p"),C=r.description;if(C.length>v){const R=C.substring(0,v);T.innerText=R+"...",T.title=C}else T.innerText=C;p.appendChild(T);const b=document.createElement("h4"),x=parseFloat(r.price).toLocaleString("en-US");b.innerText=`UGX ${x}`,p.appendChild(b);const I=document.createElement("h6"),k=parseFloat(r.wholesalePrice).toLocaleString("en-US");I.innerHTML=` Wholesale UGX:<span class="value"> ${k}</span>`,I.classList.add("wholesale-price"),p.appendChild(I);const B=document.createElement("button");B.innerText="Add to Cart";const w=document.createElement("i");let S;w.classList.add("fas","fa-shopping-cart"),B.prepend(w);const U={};function s(e){const t=document.getElementById("cart-items"),n=document.createElement("div");n.classList.add("toggle-container");const a=document.createElement("p");a.innerText="Wholesale",n.appendChild(a);const s=document.createElement("input");s.type="checkbox",s.classList.add("toggle-switch");const d=document.createElement("div");function i(){parseInt(u.value)<4&&s.checked?(alert("The number of pieces should be more than 3 to enable wholesale."),s.checked=!1):(d.style.display="inline-block",h(e.name).then((t=>{d.style.display="none",async function(e,t){const n=parseFloat(S.innerText.replace("UGX ","")),a=parseInt(u.value);if(g=a*n,t){const t=await h(e.name);null!==t&&(S.innerText=`UGX ${t}`,S.dataset.price=t)}else S.innerText=`UGX ${e.price}`,S.dataset.price=e.price;const s=parseInt(u.value);(function(e){const t=document.getElementById("total-price"),n=parseFloat(t.innerText.replace("TOTAL: UGX ",""));t.innerText="TOTAL: UGX "+(n+e).toFixed(2),console.log("Updated Total:",n+e)})(s*parseFloat(S.dataset.price)-g),console.log("Updated Price:",parseFloat(S.dataset.price))}(e,s.checked)})).catch((e=>{console.error("Error fetching wholesale price:",e)})))}d.classList.add("loading-spinner"),n.appendChild(s),n.appendChild(d),s.addEventListener("change",i);const r=document.createElement("div");r.classList.add("cart-item");const p=document.createElement("div");p.classList.add("product-details"),p.appendChild(n);const m=document.createElement("h5");m.innerText=e.name,p.appendChild(m),S=document.createElement("h4"),S.innerText=`UGX ${e.price}`,S.dataset.price=e.price,p.appendChild(S);const u=document.createElement("input");u.type="number",u.value=1,u.min=1,u.classList.add("quantity-input"),u.addEventListener("input",(()=>{console.log("Input value:",u.value);parseInt(u.value)>3?(s.checked=!0,i()):(s.checked=!1,i());const t=parseFloat(S.innerText.replace("UGX ",""));!function(e,t,n){if(e&&!isNaN(e)){const a=e*t;U[n]=a,c(),console.log("Result of multiplication:",a)}else U[n]=0,c(),console.log("Result of multiplication:",0)}(u.value,t,e.name)})),p.appendChild(u);const y=document.createElement("button");async function h(e){const t=ref(database,"products/accessories"),n=await get(child(t,e));if(n.exists()){const e=n.val().wholesalePrice;return null!==e?parseFloat(e):null}return null}y.innerText="Delete",y.classList.add("delete-button"),y.addEventListener("click",(()=>{t.removeChild(r),o(-1),c()})),p.appendChild(y),r.appendChild(p),t.appendChild(r),o(1),l(e.name);let g=0}function c(){const e=document.getElementsByClassName("cart-item");let t=0;for(let n=0;n<e.length;n++){const a=e[n],s=a.querySelector(".product-details .quantity-input"),c=a.querySelector(".product-details h4");t+=parseInt(s.value)*parseFloat(c.dataset.price)}document.getElementById("total-price").innerText="TOTAL: UGX "+t.toFixed(2),console.log("Updated Total:",t)}function o(e){const t=document.getElementById("cart-count"),n=parseInt(t.innerText)||0;t.innerText=n+e}function l(e){const t=document.getElementById("message-container");t.innerText=`${e} added to cart`,t.style.display="block",setTimeout((()=>{t.style.display="none"}),3e3)}B.addEventListener("click",(()=>{const e=document.getElementById("cart-container");e.style.display="block";document.getElementById("close-cart-btn").style.display="none",setTimeout((()=>{e.style.opacity="1"}),10),s(r),c()})),p.appendChild(B);const F=document.getElementById("open-cart-btn"),G=document.getElementById("close-cart-btn"),X=document.getElementById("cart-content"),q=document.getElementById("overlay4");X.style.display="none";const N=document.body;function d(){return 0===document.getElementsByClassName("cart-item").length}F.addEventListener("click",(()=>{if(d())return X.style.display="none",void l("Cart is Empty! Nothing is");q.style.display="block",X.style.display="block",F.style.display="none",G.style.display="inline-block",N.classList.add("no-scroll"),setTimeout((()=>{q.style.opacity="1",X.style.opacity="1"}),10)})),G.addEventListener("click",(()=>{q.style.opacity="0",X.style.opacity="0",setTimeout((()=>{X.style.display="none",G.style.display="none",F.style.display="inline-block",q.style.display="none",N.classList.remove("no-scroll")}),300)})),a.appendChild(p),e.style.display="none"}}))})),document.querySelector("#ports-link").addEventListener("click",(()=>{document.getElementById("products-list").innerHTML="";const e=document.getElementById("loader");e.style.display="block",get(portsRef).then((t=>{const n=t.val(),a=document.getElementById("products-list");for(let i in n){const r=n[i],p=document.createElement("div");p.classList.add("card1");const m=document.createElement("div");m.classList.add("used-badge2"),m.innerText="Brand New",p.appendChild(m);const u=document.createElement("img");u.src=r.image,u.alt=r.name,u.classList.add("product-img");const y=document.createElement("div");y.classList.add("loader2"),y.innerHTML='<i class="fas fa-spinner fa-spin"></i>',p.appendChild(y),u.addEventListener("load",(()=>{y.style.display="none"})),u.addEventListener("click",(()=>{const e=document.querySelector(".modal"),t=document.querySelector("#modalImg");e.style.display="block",t.src=u.src})),p.appendChild(u),u.addEventListener("error",(()=>{y.style.display="none",u.src="img/no photo.jpg",u.alt="Image Load Error"})),p.appendChild(u);const h=document.createElement("h2");h.innerText=r.name,p.appendChild(h);const g=document.createElement("div");g.classList.add("stars");for(let $=0;$<5;$++){const M=document.createElement("span");M.classList.add("star"),M.innerHTML="&#9733;",g.appendChild(M)}p.appendChild(g);const E=document.createElement("div");E.classList.add("rating-count");const f=Math.floor(100001*Math.random()),L=f>1e3?(f/1e3).toFixed(1)+"k":f;E.innerText=`(${L}) 5 star ratings`,p.appendChild(E);const v=50,T=document.createElement("p"),C=r.description;if(C.length>v){const R=C.substring(0,v);T.innerText=R+"...",T.title=C}else T.innerText=C;p.appendChild(T);const b=document.createElement("h4"),x=parseFloat(r.price).toLocaleString("en-US");b.innerText=`UGX ${x}`,p.appendChild(b);const I=document.createElement("h6"),k=parseFloat(r.wholesalePrice).toLocaleString("en-US");I.innerHTML=` Wholesale UGX:<span class="value"> ${k}</span>`,I.classList.add("wholesale-price"),p.appendChild(I);const B=document.createElement("button");B.innerText="Add to Cart";const w=document.createElement("i");let S;w.classList.add("fas","fa-shopping-cart"),B.prepend(w);const U={};function s(e){const t=document.getElementById("cart-items"),n=document.createElement("div");n.classList.add("toggle-container");const a=document.createElement("p");a.innerText="Wholesale",n.appendChild(a);const s=document.createElement("input");s.type="checkbox",s.classList.add("toggle-switch");const d=document.createElement("div");function i(){parseInt(u.value)<4&&s.checked?(alert("The number of pieces should be more than 3 to enable wholesale."),s.checked=!1):(d.style.display="inline-block",h(e.name).then((t=>{d.style.display="none",async function(e,t){const n=parseFloat(S.innerText.replace("UGX ","")),a=parseInt(u.value);if(g=a*n,t){const t=await h(e.name);null!==t&&(S.innerText=`UGX ${t}`,S.dataset.price=t)}else S.innerText=`UGX ${e.price}`,S.dataset.price=e.price;const s=parseInt(u.value);(function(e){const t=document.getElementById("total-price"),n=parseFloat(t.innerText.replace("TOTAL: UGX ",""));t.innerText="TOTAL: UGX "+(n+e).toFixed(2),console.log("Updated Total:",n+e)})(s*parseFloat(S.dataset.price)-g),console.log("Updated Price:",parseFloat(S.dataset.price))}(e,s.checked)})).catch((e=>{console.error("Error fetching wholesale price:",e)})))}d.classList.add("loading-spinner"),n.appendChild(s),n.appendChild(d),s.addEventListener("change",i);const r=document.createElement("div");r.classList.add("cart-item");const p=document.createElement("div");p.classList.add("product-details"),p.appendChild(n);const m=document.createElement("h5");m.innerText=e.name,p.appendChild(m),S=document.createElement("h4"),S.innerText=`UGX ${e.price}`,S.dataset.price=e.price,p.appendChild(S);const u=document.createElement("input");u.type="number",u.value=1,u.min=1,u.classList.add("quantity-input"),u.addEventListener("input",(()=>{console.log("Input value:",u.value);parseInt(u.value)>3?(s.checked=!0,i()):(s.checked=!1,i());const t=parseFloat(S.innerText.replace("UGX ",""));!function(e,t,n){if(e&&!isNaN(e)){const a=e*t;U[n]=a,c(),console.log("Result of multiplication:",a)}else U[n]=0,c(),console.log("Result of multiplication:",0)}(u.value,t,e.name)})),p.appendChild(u);const y=document.createElement("button");async function h(e){const t=ref(database,"products/Ports"),n=await get(child(t,e));if(n.exists()){const e=n.val().wholesalePrice;return null!==e?parseFloat(e):null}return null}y.innerText="Delete",y.classList.add("delete-button"),y.addEventListener("click",(()=>{t.removeChild(r),o(-1),c()})),p.appendChild(y),r.appendChild(p),t.appendChild(r),o(1),l(e.name);let g=0}function c(){const e=document.getElementsByClassName("cart-item");let t=0;for(let n=0;n<e.length;n++){const a=e[n],s=a.querySelector(".product-details .quantity-input"),c=a.querySelector(".product-details h4");t+=parseInt(s.value)*parseFloat(c.dataset.price)}document.getElementById("total-price").innerText="TOTAL: UGX "+t.toFixed(2),console.log("Updated Total:",t)}function o(e){const t=document.getElementById("cart-count"),n=parseInt(t.innerText)||0;t.innerText=n+e}function l(e){const t=document.getElementById("message-container");t.innerText=`${e} added to cart`,t.style.display="block",setTimeout((()=>{t.style.display="none"}),3e3)}B.addEventListener("click",(()=>{const e=document.getElementById("cart-container");e.style.display="block";document.getElementById("close-cart-btn").style.display="none",setTimeout((()=>{e.style.opacity="1"}),10),s(r),c()})),p.appendChild(B);const F=document.getElementById("open-cart-btn"),G=document.getElementById("close-cart-btn"),X=document.getElementById("cart-content"),q=document.getElementById("overlay4");X.style.display="none";const N=document.body;function d(){return 0===document.getElementsByClassName("cart-item").length}F.addEventListener("click",(()=>{if(d())return X.style.display="none",void l("Cart is Empty! Nothing is");q.style.display="block",X.style.display="block",F.style.display="none",G.style.display="inline-block",N.classList.add("no-scroll"),setTimeout((()=>{q.style.opacity="1",X.style.opacity="1"}),10)})),G.addEventListener("click",(()=>{q.style.opacity="0",X.style.opacity="0",setTimeout((()=>{X.style.display="none",G.style.display="none",F.style.display="inline-block",q.style.display="none",N.classList.remove("no-scroll")}),300)})),a.appendChild(p),e.style.display="none"}}))}));const loaderContainer=document.querySelector(".loader-container"),productsList=document.getElementById("products-list"),modal=document.querySelector(".modal"),modalImg=document.getElementById("modalImg"),closeBtn=document.querySelector(".close");function loadNewScreenCards(e){const t=document.getElementById("products-list");for(let l in e){const d=e[l],i=document.createElement("div");i.classList.add("card1");const r=document.createElement("div");r.classList.add("used-badge2"),r.innerText="Brand New",i.appendChild(r);const p=document.createElement("div");p.innerHTML="<i class='fa fa-shield'></i>Good, Tested and Trusted Quality",p.classList.add("guarantee-text"),i.appendChild(p);const m=document.createElement("img");m.src=d.image,m.alt=d.name,m.classList.add("product-img");const u=document.createElement("div");u.classList.add("loader2"),u.innerHTML='<i class="fas fa-spinner fa-spin"></i>',card.appendChild(u),m.addEventListener("load",(()=>{u.style.display="none"})),m.addEventListener("click",(()=>{const e=document.querySelector(".modal"),t=document.querySelector("#modalImg");e.style.display="block",t.src=m.src})),card.appendChild(m),m.addEventListener("error",(()=>{u.style.display="none",m.src="img/no photo.jpg",m.alt="Image Load Error"})),card.appendChild(m);const y=document.querySelector(".modal");document.querySelector(".close").addEventListener("click",(()=>{y.style.display="none"}));const h=document.createElement("h2");h.innerText=d.name,i.appendChild(h);const g=document.createElement("div");g.classList.add("stars");for(let q=0;q<5;q++){const N=document.createElement("span");N.classList.add("star"),N.innerHTML="&#9733;",g.appendChild(N)}i.appendChild(g);const E=document.createElement("div");E.classList.add("rating-count");const f=Math.floor(100001*Math.random()),L=f>1e3?(f/1e3).toFixed(1)+"k":f;E.innerText=`(${L}) 5 star ratings`,i.appendChild(E);const v=document.createElement("p");v.innerText=d.description,i.appendChild(v);const T=document.createElement("h4"),C=parseFloat(d.price).toLocaleString("en-US");T.innerText=`UGX ${C}`,i.appendChild(T);const b=document.createElement("h6"),x=parseFloat(d.wholesalePrice).toLocaleString("en-US");b.innerHTML=` Wholesale UGX:<span class="value"> ${x}</span>`,b.classList.add("wholesale-price"),i.appendChild(b),document.querySelector(".close").addEventListener("click",(function(){document.querySelector(".modal").style.display="none"}));const I=document.createElement("button");I.innerText="Add to Cart";const k=document.createElement("i");let B;k.classList.add("fas","fa-shopping-cart"),I.prepend(k);const w={};function n(e){const t=document.getElementById("cart-items"),n=document.createElement("div");n.classList.add("toggle-container");const o=document.createElement("p");o.innerText="Wholesale",n.appendChild(o);const l=document.createElement("input");l.type="checkbox",l.classList.add("toggle-switch");const d=document.createElement("div");function i(){parseInt(u.value)<4&&l.checked?(alert("The number of pieces should be more than 3 to enable wholesale."),l.checked=!1):(d.style.display="inline-block",h(e.name).then((t=>{d.style.display="none",async function(e,t){const n=parseFloat(B.innerText.replace("UGX ","")),a=parseInt(u.value);if(g=a*n,t){const t=await h(e.name);null!==t&&(B.innerText=`UGX ${t}`,B.dataset.price=t)}else B.innerText=`UGX ${e.price}`,B.dataset.price=e.price;const s=parseInt(u.value);(function(e){const t=document.getElementById("total-price"),n=parseFloat(t.innerText.replace("TOTAL: UGX ",""));t.innerText="TOTAL: UGX "+(n+e).toFixed(2),console.log("Updated Total:",n+e)})(s*parseFloat(B.dataset.price)-g),console.log("Updated Price:",parseFloat(B.dataset.price))}(e,l.checked)})).catch((e=>{console.error("Error fetching wholesale price:",e)})))}d.classList.add("loading-spinner"),n.appendChild(l),n.appendChild(d),l.addEventListener("change",i);const r=document.createElement("div");r.classList.add("cart-item");const p=document.createElement("div");p.classList.add("product-details"),p.appendChild(n);const m=document.createElement("h5");m.innerText=e.name,p.appendChild(m),B=document.createElement("h4"),B.innerText=`UGX ${e.price}`,B.dataset.price=e.price,p.appendChild(B);const u=document.createElement("input");u.type="number",u.value=1,u.min=1,u.classList.add("quantity-input"),u.addEventListener("input",(()=>{console.log("Input value:",u.value);parseInt(u.value)>3?(l.checked=!0,i()):(l.checked=!1,i());const t=parseFloat(B.innerText.replace("UGX ",""));!function(e,t,n){if(e&&!isNaN(e)){const s=e*t;w[n]=s,a(),console.log("Result of multiplication:",s)}else w[n]=0,a(),console.log("Result of multiplication:",0)}(u.value,t,e.name)})),p.appendChild(u);const y=document.createElement("button");async function h(e){const t=ref(database,"products/newScreens"),n=await get(child(t,e));if(n.exists()){const e=n.val().wholesalePrice;return null!==e?parseFloat(e):null}return null}y.innerText="Delete",y.classList.add("delete-button"),y.addEventListener("click",(()=>{t.removeChild(r),s(-1),a()})),p.appendChild(y),r.appendChild(p),t.appendChild(r),s(1),c(e.name);let g=0}function a(){const e=document.getElementsByClassName("cart-item");let t=0;for(let n=0;n<e.length;n++){const a=e[n],s=a.querySelector(".product-details .quantity-input"),c=a.querySelector(".product-details h4");t+=parseInt(s.value)*parseFloat(c.dataset.price)}document.getElementById("total-price").innerText="TOTAL: UGX "+t.toFixed(2),console.log("Updated Total:",t)}function s(e){const t=document.getElementById("cart-count"),n=parseInt(t.innerText)||0;t.innerText=n+e}function c(e){const t=document.getElementById("message-container");t.innerText=`${e} added to cart`,t.style.display="block",setTimeout((()=>{t.style.display="none"}),3e3)}I.addEventListener("click",(()=>{document.getElementById("cart-container").style.display="block",n(d),a()})),i.appendChild(I);const S=document.getElementById("open-cart-btn"),U=document.getElementById("close-cart-btn"),F=document.getElementById("cart-content"),G=document.getElementById("overlay4");F.style.display="none";const X=document.body;function o(){return 0===document.getElementsByClassName("cart-item").length}S.addEventListener("click",(()=>{if(o())return F.style.display="none",void c("Cart is Empty! Nothing is");G.style.display="block",F.style.display="block",S.style.display="none",U.style.display="inline-block",X.classList.add("no-scroll"),setTimeout((()=>{G.style.opacity="1",F.style.opacity="1"}),10)})),U.addEventListener("click",(()=>{G.style.opacity="0",F.style.opacity="0",setTimeout((()=>{F.style.display="none",U.style.display="none",S.style.display="inline-block",G.style.display="none",X.classList.remove("no-scroll")}),300)})),isNewScreenElementInViewport(i)&&t.appendChild(i)}loader.style.display="none"}function isNewScreenElementInViewport(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function handleNewScreenScroll(){const e=document.getElementById("products-list");document.querySelectorAll(".card1").forEach((t=>{isNewScreenElementInViewport(t)&&!e.contains(t)&&e.appendChild(t)}))}function loadNewScreenCardsWithRetriesAndBackoff(e=5,t=3e3,n=16e3){!function e(t){setTimeout((()=>{get(newScreensRef).then((a=>{const s=a.val();if(s)loadNewScreenCards(s);else{e(Math.min(2*t,n))}})).catch((()=>{e(Math.min(2*t,n))}))}),t)}(t)}function loadGradeBScreenCards(e){const t=document.getElementById("products-list");for(let l in e){const d=e[l],i=document.createElement("div");i.classList.add("card1");const r=document.createElement("div");r.classList.add("used-badge"),r.innerText="Grade B ",i.appendChild(r);const p=document.createElement("div");p.innerHTML="<i class='fa fa-shield'></i>No Guarantee for Grade B",p.classList.add("guarantee-text"),i.appendChild(p);const m=document.createElement("img");m.src=d.image,m.alt=d.name,m.classList.add("product-img");const u=document.createElement("div");u.classList.add("loader2"),u.innerHTML='<i class="fas fa-spinner fa-spin"></i>',card.appendChild(u),m.addEventListener("load",(()=>{u.style.display="none"})),m.addEventListener("click",(()=>{const e=document.querySelector(".modal"),t=document.querySelector("#modalImg");e.style.display="block",t.src=m.src})),card.appendChild(m),m.addEventListener("error",(()=>{u.style.display="none",m.src="img/no photo.jpg",m.alt="Image Load Error"})),card.appendChild(m);const y=document.querySelector(".modal");document.querySelector(".close").addEventListener("click",(()=>{y.style.display="none"}));const h=document.createElement("h2");h.innerText=d.name,i.appendChild(h);const g=document.createElement("div");g.classList.add("stars");for(let q=0;q<5;q++){const N=document.createElement("span");N.classList.add("star"),N.innerHTML="&#9733;",g.appendChild(N)}i.appendChild(g);const E=document.createElement("div");E.classList.add("rating-count");const f=Math.floor(100001*Math.random()),L=f>1e3?(f/1e3).toFixed(1)+"k":f;E.innerText=`(${L}) 5 star ratings`,i.appendChild(E);const v=document.createElement("p");v.innerText=d.description,i.appendChild(v);const T=document.createElement("h4"),C=parseFloat(d.price).toLocaleString("en-US");T.innerText=`UGX ${C}`,i.appendChild(T);const b=document.createElement("h6"),x=parseFloat(d.wholesalePrice).toLocaleString("en-US");b.innerHTML=` Wholesale UGX:<span class="value"> ${x}</span>`,b.classList.add("wholesale-price"),i.appendChild(b),document.querySelector(".close").addEventListener("click",(function(){document.querySelector(".modal").style.display="none"}));const I=document.createElement("button");I.innerText="Add to Cart";const k=document.createElement("i");let B;k.classList.add("fas","fa-shopping-cart"),I.prepend(k);const w={};function n(e){const t=document.getElementById("cart-items"),n=document.createElement("div");n.classList.add("toggle-container");const o=document.createElement("p");o.innerText="Wholesale",n.appendChild(o);const l=document.createElement("input");l.type="checkbox",l.classList.add("toggle-switch");const d=document.createElement("div");function i(){parseInt(u.value)<4&&l.checked?(alert("The number of pieces should be more than 3 to enable wholesale."),l.checked=!1):(d.style.display="inline-block",h(e.name).then((t=>{d.style.display="none",async function(e,t){const n=parseFloat(B.innerText.replace("UGX ","")),a=parseInt(u.value);if(g=a*n,t){const t=await h(e.name);null!==t&&(B.innerText=`UGX ${t}`,B.dataset.price=t)}else B.innerText=`UGX ${e.price}`,B.dataset.price=e.price;const s=parseInt(u.value);(function(e){const t=document.getElementById("total-price"),n=parseFloat(t.innerText.replace("TOTAL: UGX ",""));t.innerText="TOTAL: UGX "+(n+e).toFixed(2),console.log("Updated Total:",n+e)})(s*parseFloat(B.dataset.price)-g),console.log("Updated Price:",parseFloat(B.dataset.price))}(e,l.checked)})).catch((e=>{console.error("Error fetching wholesale price:",e)})))}d.classList.add("loading-spinner"),n.appendChild(l),n.appendChild(d),l.addEventListener("change",i);const r=document.createElement("div");r.classList.add("cart-item");const p=document.createElement("div");p.classList.add("product-details"),p.appendChild(n);const m=document.createElement("h5");m.innerText=e.name,p.appendChild(m),B=document.createElement("h4"),B.innerText=`UGX ${e.price}`,B.dataset.price=e.price,p.appendChild(B);const u=document.createElement("input");u.type="number",u.value=1,u.min=1,u.classList.add("quantity-input"),u.addEventListener("input",(()=>{console.log("Input value:",u.value);parseInt(u.value)>3?(l.checked=!0,i()):(l.checked=!1,i());const t=parseFloat(B.innerText.replace("UGX ",""));!function(e,t,n){if(e&&!isNaN(e)){const s=e*t;w[n]=s,a(),console.log("Result of multiplication:",s)}else w[n]=0,a(),console.log("Result of multiplication:",0)}(u.value,t,e.name)})),p.appendChild(u);const y=document.createElement("button");async function h(e){const t=ref(database,"products/gradeBScreens"),n=await get(child(t,e));if(n.exists()){const e=n.val().wholesalePrice;return null!==e?parseFloat(e):null}return null}y.innerText="Delete",y.classList.add("delete-button"),y.addEventListener("click",(()=>{t.removeChild(r),s(-1),a()})),p.appendChild(y),r.appendChild(p),t.appendChild(r),s(1),c(e.name);let g=0}function a(){const e=document.getElementsByClassName("cart-item");let t=0;for(let n=0;n<e.length;n++){const a=e[n],s=a.querySelector(".product-details .quantity-input"),c=a.querySelector(".product-details h4");t+=parseInt(s.value)*parseFloat(c.dataset.price)}document.getElementById("total-price").innerText="TOTAL: UGX "+t.toFixed(2),console.log("Updated Total:",t)}function s(e){const t=document.getElementById("cart-count"),n=parseInt(t.innerText)||0;t.innerText=n+e}function c(e){const t=document.getElementById("message-container");t.innerText=`${e} added to cart`,t.style.display="block",setTimeout((()=>{t.style.display="none"}),3e3)}I.addEventListener("click",(()=>{const e=document.getElementById("cart-container");e.style.display="block";document.getElementById("close-cart-btn").style.display="none",setTimeout((()=>{e.style.opacity="1"}),10),n(d),a()})),i.appendChild(I);const S=document.getElementById("open-cart-btn"),U=document.getElementById("close-cart-btn"),F=document.getElementById("cart-content"),G=document.getElementById("overlay4");F.style.display="none";const X=document.body;function o(){return 0===document.getElementsByClassName("cart-item").length}S.addEventListener("click",(()=>{if(o())return F.style.display="none",void c("Cart is Empty! Nothing is");G.style.display="block",F.style.display="block",S.style.display="none",U.style.display="inline-block",X.classList.add("no-scroll"),setTimeout((()=>{G.style.opacity="1",F.style.opacity="1"}),10)})),U.addEventListener("click",(()=>{G.style.opacity="0",F.style.opacity="0",setTimeout((()=>{F.style.display="none",U.style.display="none",S.style.display="inline-block",G.style.display="none",X.classList.remove("no-scroll")}),300)})),isGradeBScreenElementInViewport(i)&&t.appendChild(i)}loader.style.display="none"}function isGradeBScreenElementInViewport(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function handleGradeBScreenScroll(){const e=document.getElementById("products-list");document.querySelectorAll(".card1").forEach((t=>{isGradeBScreenElementInViewport(t)&&!e.contains(t)&&e.appendChild(t)}))}function loadGradeBScreenCardsWithRetriesAndBackoff(e=5,t=3e3,n=16e3){!function e(t){setTimeout((()=>{get(gradeBScreensRef).then((a=>{const s=a.val();if(s)loadGradeBScreenCards(s);else{e(Math.min(2*t,n))}})).catch((()=>{e(Math.min(2*t,n))}))}),t)}(t)}function loadPortCards(e){const t=document.getElementById("products-list");for(let l in e){const d=e[l],i=document.createElement("div");i.classList.add("card1");const r=document.createElement("img");r.src=d.image,r.alt=d.name,r.classList.add("product-img");const p=document.createElement("div");p.classList.add("loader2"),p.innerHTML='<i class="fas fa-spinner fa-spin"></i>',card.appendChild(p),r.addEventListener("load",(()=>{p.style.display="none"})),r.addEventListener("click",(()=>{const e=document.querySelector(".modal"),t=document.querySelector("#modalImg");e.style.display="block",t.src=r.src})),card.appendChild(r),r.addEventListener("error",(()=>{p.style.display="none",r.src="img/no photo.jpg",r.alt="Image Load Error"})),card.appendChild(r);const m=document.querySelector(".modal");document.querySelector(".close").addEventListener("click",(()=>{m.style.display="none"}));const u=document.createElement("h2");u.innerText=d.name,i.appendChild(u);const y=document.createElement("div");y.classList.add("stars");for(let G=0;G<5;G++){const X=document.createElement("span");X.classList.add("star"),X.innerHTML="&#9733;",y.appendChild(X)}i.appendChild(y);const h=document.createElement("div");h.classList.add("rating-count");const g=Math.floor(100001*Math.random()),E=g>1e3?(g/1e3).toFixed(1)+"k":g;h.innerText=`(${E}) 5 star ratings`,i.appendChild(h);const f=document.createElement("p");f.innerText=d.description,i.appendChild(f);const L=document.createElement("h4"),v=parseFloat(d.price).toLocaleString("en-US");L.innerText=`UGX ${v}`,i.appendChild(L);const T=document.createElement("h6"),C=parseFloat(d.wholesalePrice).toLocaleString("en-US");T.innerHTML=` Wholesale UGX:<span class="value"> ${C}</span>`,T.classList.add("wholesale-price"),i.appendChild(T),document.querySelector(".close").addEventListener("click",(function(){document.querySelector(".modal").style.display="none"}));const b=document.createElement("button");b.innerText="Add to Cart";const x=document.createElement("i");let I;x.classList.add("fas","fa-shopping-cart"),b.prepend(x);const k={};function n(e){const t=document.getElementById("cart-items"),n=document.createElement("div");n.classList.add("toggle-container");const o=document.createElement("p");o.innerText="Wholesale",n.appendChild(o);const l=document.createElement("input");l.type="checkbox",l.classList.add("toggle-switch");const d=document.createElement("div");function i(){parseInt(u.value)<4&&l.checked?(alert("The number of pieces should be more than 3 to enable wholesale."),l.checked=!1):(d.style.display="inline-block",h(e.name).then((t=>{d.style.display="none",async function(e,t){const n=parseFloat(I.innerText.replace("UGX ","")),a=parseInt(u.value);if(g=a*n,t){const t=await h(e.name);null!==t&&(I.innerText=`UGX ${t}`,I.dataset.price=t)}else I.innerText=`UGX ${e.price}`,I.dataset.price=e.price;const s=parseInt(u.value);(function(e){const t=document.getElementById("total-price"),n=parseFloat(t.innerText.replace("TOTAL: UGX ",""));t.innerText="TOTAL: UGX "+(n+e).toFixed(2),console.log("Updated Total:",n+e)})(s*parseFloat(I.dataset.price)-g),console.log("Updated Price:",parseFloat(I.dataset.price))}(e,l.checked)})).catch((e=>{console.error("Error fetching wholesale price:",e)})))}d.classList.add("loading-spinner"),n.appendChild(l),n.appendChild(d),l.addEventListener("change",i);const r=document.createElement("div");r.classList.add("cart-item");const p=document.createElement("div");p.classList.add("product-details"),p.appendChild(n);const m=document.createElement("h5");m.innerText=e.name,p.appendChild(m),I=document.createElement("h4"),I.innerText=`UGX ${e.price}`,I.dataset.price=e.price,p.appendChild(I);const u=document.createElement("input");u.type="number",u.value=1,u.min=1,u.classList.add("quantity-input"),u.addEventListener("input",(()=>{console.log("Input value:",u.value);parseInt(u.value)>3?(l.checked=!0,i()):(l.checked=!1,i());const t=parseFloat(I.innerText.replace("UGX ",""));!function(e,t,n){if(e&&!isNaN(e)){const s=e*t;k[n]=s,a(),console.log("Result of multiplication:",s)}else k[n]=0,a(),console.log("Result of multiplication:",0)}(u.value,t,e.name)})),p.appendChild(u);const y=document.createElement("button");async function h(e){const t=ref(database,"products/Ports"),n=await get(child(t,e));if(n.exists()){const e=n.val().wholesalePrice;return null!==e?parseFloat(e):null}return null}y.innerText="Delete",y.classList.add("delete-button"),y.addEventListener("click",(()=>{t.removeChild(r),s(-1),a()})),p.appendChild(y),r.appendChild(p),t.appendChild(r),s(1),c(e.name);let g=0}function a(){const e=document.getElementsByClassName("cart-item");let t=0;for(let n=0;n<e.length;n++){const a=e[n],s=a.querySelector(".product-details .quantity-input"),c=a.querySelector(".product-details h4");t+=parseInt(s.value)*parseFloat(c.dataset.price)}document.getElementById("total-price").innerText="TOTAL: UGX "+t.toFixed(2),console.log("Updated Total:",t)}function s(e){const t=document.getElementById("cart-count"),n=parseInt(t.innerText)||0;t.innerText=n+e}function c(e){const t=document.getElementById("message-container");t.innerText=`${e} added to cart`,t.style.display="block",setTimeout((()=>{t.style.display="none"}),3e3)}b.addEventListener("click",(()=>{const e=document.getElementById("cart-container");e.style.display="block";document.getElementById("close-cart-btn").style.display="none",setTimeout((()=>{e.style.opacity="1"}),10),n(d),a()})),i.appendChild(b);const B=document.getElementById("open-cart-btn"),w=document.getElementById("close-cart-btn"),S=document.getElementById("cart-content"),U=document.getElementById("overlay4");S.style.display="none";const F=document.body;function o(){return 0===document.getElementsByClassName("cart-item").length}B.addEventListener("click",(()=>{if(o())return S.style.display="none",void c("Cart is Empty! Nothing is");U.style.display="block",S.style.display="block",B.style.display="none",w.style.display="inline-block",F.classList.add("no-scroll"),setTimeout((()=>{U.style.opacity="1",S.style.opacity="1"}),10)})),w.addEventListener("click",(()=>{U.style.opacity="0",S.style.opacity="0",setTimeout((()=>{S.style.display="none",w.style.display="none",B.style.display="inline-block",U.style.display="none",F.classList.remove("no-scroll")}),300)})),isPortElementInViewport(i)&&t.appendChild(i)}loader.style.display="none"}function isPortElementInViewport(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function handlePortScroll(){const e=document.getElementById("products-list");document.querySelectorAll(".card1").forEach((t=>{isPortElementInViewport(t)&&!e.contains(t)&&e.appendChild(t)}))}function loadPortCardsWithRetriesAndBackoff(e=5,t=3e3,n=16e3){!function e(t){setTimeout((()=>{get(portsRef).then((a=>{const s=a.val();if(s)loadPortCards(s);else{e(Math.min(2*t,n))}})).catch((()=>{e(Math.min(2*t,n))}))}),t)}(t)}function loadTouchesCards(e){const t=document.getElementById("products-list");for(let l in e){const d=e[l],i=document.createElement("div");i.classList.add("card1");const r=document.createElement("img");r.src=d.image,r.alt=d.name,r.classList.add("product-img");const p=document.createElement("div");p.classList.add("loader2"),p.innerHTML='<i class="fas fa-spinner fa-spin"></i>',i.appendChild(p),r.addEventListener("load",(()=>{p.style.display="none"})),r.addEventListener("click",(()=>{const e=document.querySelector(".modal"),t=document.querySelector("#modalImg");e.style.display="block",t.src=r.src})),i.appendChild(r),r.addEventListener("error",(()=>{p.style.display="none",r.src="img/no photo.jpg",r.alt="Image Load Error"})),i.appendChild(r);const m=document.querySelector(".modal");document.querySelector(".close").addEventListener("click",(()=>{m.style.display="none"}));const u=document.createElement("h2");u.innerText=d.name,i.appendChild(u);const y=document.createElement("div");y.classList.add("stars");for(let q=0;q<5;q++){const N=document.createElement("span");N.classList.add("star"),N.innerHTML="&#9733;",y.appendChild(N)}i.appendChild(y);const h=document.createElement("div");h.classList.add("rating-count");const g=Math.floor(100001*Math.random()),E=g>1e3?(g/1e3).toFixed(1)+"k":g;h.innerText=`(${E}) 5 star ratings`,i.appendChild(h);const f=50,L=document.createElement("p"),v=d.description;if(v.length>f){const $=v.substring(0,f);L.innerText=$+"...",L.title=v}else L.innerText=v;i.appendChild(L);const T=document.createElement("h4"),C=parseFloat(d.price).toLocaleString("en-US");T.innerText=`UGX ${C}`,i.appendChild(T);const b=document.createElement("h6"),x=parseFloat(d.wholesalePrice).toLocaleString("en-US");b.innerHTML=` Wholesale UGX:<span class="value"> ${x}</span>`,b.classList.add("wholesale-price"),i.appendChild(b),document.querySelector(".close").addEventListener("click",(function(){document.querySelector(".modal").style.display="none"}));const I=document.createElement("button");I.innerText="Add to Cart";const k=document.createElement("i");let B;k.classList.add("fas","fa-shopping-cart"),I.prepend(k);const w={};function n(e){const t=document.getElementById("cart-items"),n=document.createElement("div");n.classList.add("toggle-container");const o=document.createElement("p");o.innerText="Wholesale",n.appendChild(o);const l=document.createElement("input");l.type="checkbox",l.classList.add("toggle-switch");const d=document.createElement("div");function i(){parseInt(u.value)<4&&l.checked?(alert("The number of pieces should be more than 3 to enable wholesale."),l.checked=!1):(d.style.display="inline-block",h(e.name).then((t=>{d.style.display="none",async function(e,t){const n=parseFloat(B.innerText.replace("UGX ","")),a=parseInt(u.value);if(g=a*n,t){const t=await h(e.name);null!==t&&(B.innerText=`UGX ${t}`,B.dataset.price=t)}else B.innerText=`UGX ${e.price}`,B.dataset.price=e.price;const s=parseInt(u.value);(function(e){const t=document.getElementById("total-price"),n=parseFloat(t.innerText.replace("TOTAL: UGX ",""));t.innerText="TOTAL: UGX "+(n+e).toFixed(2),console.log("Updated Total:",n+e)})(s*parseFloat(B.dataset.price)-g),console.log("Updated Price:",parseFloat(B.dataset.price))}(e,l.checked)})).catch((e=>{console.error("Error fetching wholesale price:",e)})))}d.classList.add("loading-spinner"),n.appendChild(l),n.appendChild(d),l.addEventListener("change",i);const r=document.createElement("div");r.classList.add("cart-item");const p=document.createElement("div");p.classList.add("product-details"),p.appendChild(n);const m=document.createElement("h5");m.innerText=e.name,p.appendChild(m),B=document.createElement("h4"),B.innerText=`UGX ${e.price}`,B.dataset.price=e.price,p.appendChild(B);const u=document.createElement("input");u.type="number",u.value=1,u.min=1,u.classList.add("quantity-input"),u.addEventListener("input",(()=>{console.log("Input value:",u.value);parseInt(u.value)>3?(l.checked=!0,i()):(l.checked=!1,i());const t=parseFloat(B.innerText.replace("UGX ",""));!function(e,t,n){if(e&&!isNaN(e)){const s=e*t;w[n]=s,a(),console.log("Result of multiplication:",s)}else w[n]=0,a(),console.log("Result of multiplication:",0)}(u.value,t,e.name)})),p.appendChild(u);const y=document.createElement("button");async function h(e){const t=ref(database,"products/touches"),n=await get(child(t,e));if(n.exists()){const e=n.val().wholesalePrice;return null!==e?parseFloat(e):null}return null}y.innerText="Delete",y.classList.add("delete-button"),y.addEventListener("click",(()=>{t.removeChild(r),s(-1),a()})),p.appendChild(y),r.appendChild(p),t.appendChild(r),s(1),c(e.name);let g=0}function a(){const e=document.getElementsByClassName("cart-item");let t=0;for(let n=0;n<e.length;n++){const a=e[n],s=a.querySelector(".product-details .quantity-input"),c=a.querySelector(".product-details h4");t+=parseInt(s.value)*parseFloat(c.dataset.price)}document.getElementById("total-price").innerText="TOTAL: UGX "+t.toFixed(2),console.log("Updated Total:",t)}function s(e){const t=document.getElementById("cart-count"),n=parseInt(t.innerText)||0;t.innerText=n+e}function c(e){const t=document.getElementById("message-container");t.innerText=`${e} added to cart`,t.style.display="block",setTimeout((()=>{t.style.display="none"}),3e3)}I.addEventListener("click",(()=>{const e=document.getElementById("cart-container");e.style.display="block";document.getElementById("close-cart-btn").style.display="none",setTimeout((()=>{e.style.opacity="1"}),10),n(d),a()})),i.appendChild(I);const S=document.getElementById("open-cart-btn"),U=document.getElementById("close-cart-btn"),F=document.getElementById("cart-content"),G=document.getElementById("overlay4");F.style.display="none";const X=document.body;function o(){return 0===document.getElementsByClassName("cart-item").length}S.addEventListener("click",(()=>{if(o())return F.style.display="none",void c("Cart is Empty! Nothing is");G.style.display="block",F.style.display="block",S.style.display="none",U.style.display="inline-block",X.classList.add("no-scroll"),setTimeout((()=>{G.style.opacity="1",F.style.opacity="1"}),10)})),U.addEventListener("click",(()=>{G.style.opacity="0",F.style.opacity="0",setTimeout((()=>{F.style.display="none",U.style.display="none",S.style.display="inline-block",G.style.display="none",X.classList.remove("no-scroll")}),300)})),isInViewportTouches(i)&&t.appendChild(i)}loader.style.display="none"}function isInViewportTouches(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function handleScrollTouches(){const e=document.getElementById("products-list");document.querySelectorAll(".card1").forEach((t=>{isInViewportTouches(t)&&!e.contains(t)&&e.appendChild(t)}))}function loadTouchesCardsWithRetriesAndBackoff(e=5,t=3e3,n=16e3){!function e(t){setTimeout((()=>{get(touchesRef).then((a=>{const s=a.val();if(s)loadTouchesCards(s);else{e(Math.min(2*t,n))}})).catch((()=>{e(Math.min(2*t,n))}))}),t)}(t)}function isInViewport(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function loadCards(e){const t=document.getElementById("products-list");for(let l in e){const d=e[l],i=document.createElement("div");i.classList.add("card1");const r=document.createElement("img");r.src=d.image,r.alt=d.name,r.classList.add("product-img");const p=document.createElement("div");p.classList.add("loader2"),p.innerHTML='<i class="fas fa-spinner fa-spin"></i>',i.appendChild(p),r.addEventListener("load",(()=>{p.style.display="none"})),r.addEventListener("click",(()=>{const e=document.querySelector(".modal"),t=document.querySelector("#modalImg");e.style.display="block",t.src=r.src})),i.appendChild(r),r.addEventListener("error",(()=>{p.style.display="none",r.src="img/no photo.jpg",r.alt="Image Load Error"})),i.appendChild(r);const m=document.querySelector(".modal");document.querySelector(".close").addEventListener("click",(()=>{m.style.display="none"}));const u=document.createElement("h2");u.innerText=d.name,i.appendChild(u);const y=document.createElement("div");y.classList.add("stars");for(let q=0;q<5;q++){const N=document.createElement("span");N.classList.add("star"),N.innerHTML="&#9733;",y.appendChild(N)}i.appendChild(y);const h=document.createElement("div");h.classList.add("rating-count");const g=Math.floor(100001*Math.random()),E=g>1e3?(g/1e3).toFixed(1)+"k":g;h.innerText=`(${E}) 5 star ratings`,i.appendChild(h);const f=50,L=document.createElement("p"),v=d.description;if(v.length>f){const $=v.substring(0,f);L.innerText=$+"...",L.title=v}else L.innerText=v;i.appendChild(L);const T=document.createElement("h4"),C=parseFloat(d.price).toLocaleString("en-US");T.innerText=`UGX ${C}`,i.appendChild(T);const b=document.createElement("h6"),x=parseFloat(d.wholesalePrice).toLocaleString("en-US");b.innerHTML=` Wholesale UGX:<span class="value"> ${x}</span>`,b.classList.add("wholesale-price"),i.appendChild(b),document.querySelector(".close").addEventListener("click",(function(){document.querySelector(".modal").style.display="none"}));const I=document.createElement("button");I.innerText="Add to Cart";const k=document.createElement("i");let B;k.classList.add("fas","fa-shopping-cart"),I.prepend(k);const w={};function n(e){const t=document.getElementById("cart-items"),n=document.createElement("div");n.classList.add("toggle-container");const o=document.createElement("p");o.innerText="Wholesale",n.appendChild(o);const l=document.createElement("input");l.type="checkbox",l.classList.add("toggle-switch");const d=document.createElement("div");function i(){parseInt(u.value)<4&&l.checked?(alert("The number of pieces should be more than 3 to enable wholesale."),l.checked=!1):(d.style.display="inline-block",h(e.name).then((t=>{d.style.display="none",async function(e,t){const n=parseFloat(B.innerText.replace("UGX ","")),a=parseInt(u.value);if(g=a*n,t){const t=await h(e.name);null!==t&&(B.innerText=`UGX ${t}`,B.dataset.price=t)}else B.innerText=`UGX ${e.price}`,B.dataset.price=e.price;const s=parseInt(u.value);(function(e){const t=document.getElementById("total-price"),n=parseFloat(t.innerText.replace("TOTAL: UGX ",""));t.innerText="TOTAL: UGX "+(n+e).toFixed(2),console.log("Updated Total:",n+e)})(s*parseFloat(B.dataset.price)-g),console.log("Updated Price:",parseFloat(B.dataset.price))}(e,l.checked)})).catch((e=>{console.error("Error fetching wholesale price:",e)})))}d.classList.add("loading-spinner"),n.appendChild(l),n.appendChild(d),l.addEventListener("change",i);const r=document.createElement("div");r.classList.add("cart-item");const p=document.createElement("div");p.classList.add("product-details"),p.appendChild(n);const m=document.createElement("h5");m.innerText=e.name,p.appendChild(m),B=document.createElement("h4"),B.innerText=`UGX ${e.price}`,B.dataset.price=e.price,p.appendChild(B);const u=document.createElement("input");u.type="number",u.value=1,u.min=1,u.classList.add("quantity-input"),u.addEventListener("input",(()=>{console.log("Input value:",u.value);parseInt(u.value)>3?(l.checked=!0,i()):(l.checked=!1,i());const t=parseFloat(B.innerText.replace("UGX ",""));!function(e,t,n){if(e&&!isNaN(e)){const s=e*t;w[n]=s,a(),console.log("Result of multiplication:",s)}else w[n]=0,a(),console.log("Result of multiplication:",0)}(u.value,t,e.name)})),p.appendChild(u);const y=document.createElement("button");async function h(e){const t=ref(database,"products/accessories"),n=await get(child(t,e));if(n.exists()){const e=n.val().wholesalePrice;return null!==e?parseFloat(e):null}return null}y.innerText="Delete",y.classList.add("delete-button"),y.addEventListener("click",(()=>{t.removeChild(r),s(-1),a()})),p.appendChild(y),r.appendChild(p),t.appendChild(r),s(1),c(e.name);let g=0}function a(){const e=document.getElementsByClassName("cart-item");let t=0;for(let n=0;n<e.length;n++){const a=e[n],s=a.querySelector(".product-details .quantity-input"),c=a.querySelector(".product-details h4");t+=parseInt(s.value)*parseFloat(c.dataset.price)}document.getElementById("total-price").innerText="TOTAL: UGX "+t.toFixed(2),console.log("Updated Total:",t)}function s(e){const t=document.getElementById("cart-count"),n=parseInt(t.innerText)||0;t.innerText=n+e}function c(e){const t=document.getElementById("message-container");t.innerText=`${e} added to cart`,t.style.display="block",setTimeout((()=>{t.style.display="none"}),3e3)}I.addEventListener("click",(()=>{const e=document.getElementById("cart-container");e.style.display="block";document.getElementById("close-cart-btn").style.display="none",setTimeout((()=>{e.style.opacity="1"}),10),n(d),a()})),i.appendChild(I);const S=document.getElementById("open-cart-btn"),U=document.getElementById("close-cart-btn"),F=document.getElementById("cart-content"),G=document.getElementById("overlay4");document.getElementById("cart-container");F.style.display="none";const X=document.body;function o(){return 0===document.getElementsByClassName("cart-item").length}S.addEventListener("click",(()=>{if(o())return F.style.display="none",void c("Cart is Empty! Nothing is");G.style.display="block",F.style.display="block",S.style.display="none",U.style.display="inline-block",X.classList.add("no-scroll"),setTimeout((()=>{G.style.opacity="1",F.style.opacity="1"}),10)})),U.addEventListener("click",(()=>{G.style.opacity="0",F.style.opacity="0",setTimeout((()=>{F.style.display="none",U.style.display="none",S.style.display="inline-block",G.style.display="none",X.classList.remove("no-scroll")}),300)})),isInViewport(i)&&t.appendChild(i)}loader.style.display="none"}function handleScroll(){const e=document.getElementById("products-list");document.querySelectorAll(".card1").forEach((t=>{isInViewport(t)&&!e.contains(t)&&e.appendChild(t)}))}function loadCardsWithRetriesAndBackoff(e,t,n=5,a=3e3,s=16e3){!function n(a){setTimeout((()=>{get(e).then((e=>{const c=e.val();if(c)t(c);else{n(Math.min(2*a,s))}})).catch((()=>{n(Math.min(2*a,s))}))}),a)}(a)}function loadCardsNew(e){const t=document.getElementById("products-list");for(let l in e){const d=e[l],i=document.createElement("div");i.classList.add("card1");const r=document.createElement("img");r.src=d.image,r.alt=d.name,r.classList.add("product-img");const p=document.createElement("div");p.classList.add("loader2"),p.innerHTML='<i class="fas fa-spinner fa-spin"></i>',i.appendChild(p),r.addEventListener("load",(()=>{p.style.display="none"})),r.addEventListener("click",(()=>{const e=document.querySelector(".modal"),t=document.querySelector("#modalImg");e.style.display="block",t.src=r.src})),i.appendChild(r),r.addEventListener("error",(()=>{p.style.display="none",r.src="img/no photo.jpg",r.alt="Image Load Error"})),i.appendChild(r);const m=document.querySelector(".modal");document.querySelector(".close").addEventListener("click",(()=>{m.style.display="none"}));const u=document.createElement("h2");u.innerText=d.name,i.appendChild(u);const y=document.createElement("div");y.classList.add("stars");for(let q=0;q<5;q++){const N=document.createElement("span");N.classList.add("star"),N.innerHTML="&#9733;",y.appendChild(N)}i.appendChild(y);const h=document.createElement("div");h.classList.add("rating-count");const g=Math.floor(100001*Math.random()),E=g>1e3?(g/1e3).toFixed(1)+"k":g;h.innerText=`(${E}) 5 star ratings`,i.appendChild(h);const f=50,L=document.createElement("p"),v=d.description;if(v.length>f){const $=v.substring(0,f);L.innerText=$+"...",L.title=v}else L.innerText=v;i.appendChild(L);const T=document.createElement("h4"),C=parseFloat(d.price).toLocaleString("en-US");T.innerText=`UGX ${C}`,i.appendChild(T);const b=document.createElement("h6"),x=parseFloat(d.wholesalePrice).toLocaleString("en-US");b.innerHTML=` Wholesale UGX:<span class="value"> ${x}</span>`,b.classList.add("wholesale-price"),i.appendChild(b),document.querySelector(".close").addEventListener("click",(function(){document.querySelector(".modal").style.display="none"}));const I=document.createElement("button");I.innerText="Add to Cart";const k=document.createElement("i");let B;k.classList.add("fas","fa-shopping-cart"),I.prepend(k);const w={};function n(e){const t=document.getElementById("cart-items"),n=document.createElement("div");n.classList.add("toggle-container");const o=document.createElement("p");o.innerText="Wholesale",n.appendChild(o);const l=document.createElement("input");l.type="checkbox",l.classList.add("toggle-switch");const d=document.createElement("div");function i(){parseInt(u.value)<4&&l.checked?(alert("The number of pieces should be more than 3 to enable wholesale."),l.checked=!1):(d.style.display="inline-block",h(e.name).then((t=>{d.style.display="none",async function(e,t){const n=parseFloat(B.innerText.replace("UGX ","")),a=parseInt(u.value);if(g=a*n,t){const t=await h(e.name);null!==t&&(B.innerText=`UGX ${t}`,B.dataset.price=t)}else B.innerText=`UGX ${e.price}`,B.dataset.price=e.price;const s=parseInt(u.value);(function(e){const t=document.getElementById("total-price"),n=parseFloat(t.innerText.replace("TOTAL: UGX ",""));t.innerText="TOTAL: UGX "+(n+e).toFixed(2),console.log("Updated Total:",n+e)})(s*parseFloat(B.dataset.price)-g),console.log("Updated Price:",parseFloat(B.dataset.price))}(e,l.checked)})).catch((e=>{console.error("Error fetching wholesale price:",e)})))}d.classList.add("loading-spinner"),n.appendChild(l),n.appendChild(d),l.addEventListener("change",i);const r=document.createElement("div");r.classList.add("cart-item");const p=document.createElement("div");p.classList.add("product-details"),p.appendChild(n);const m=document.createElement("h5");m.innerText=e.name,p.appendChild(m),B=document.createElement("h4"),B.innerText=`UGX ${e.price}`,B.dataset.price=e.price,p.appendChild(B);const u=document.createElement("input");u.type="number",u.value=1,u.min=1,u.classList.add("quantity-input"),u.addEventListener("input",(()=>{console.log("Input value:",u.value);parseInt(u.value)>3?(l.checked=!0,i()):(l.checked=!1,i());const t=parseFloat(B.innerText.replace("UGX ",""));!function(e,t,n){if(e&&!isNaN(e)){const s=e*t;w[n]=s,a(),console.log("Result of multiplication:",s)}else w[n]=0,a(),console.log("Result of multiplication:",0)}(u.value,t,e.name)})),p.appendChild(u);const y=document.createElement("button");async function h(e){const t=ref(database,"products/electronics"),n=await get(child(t,e));if(n.exists()){const e=n.val().wholesalePrice;return null!==e?parseFloat(e):null}return null}y.innerText="Delete",y.classList.add("delete-button"),y.addEventListener("click",(()=>{t.removeChild(r),s(-1),a()})),p.appendChild(y),r.appendChild(p),t.appendChild(r),s(1),c(e.name);let g=0}function a(){const e=document.getElementsByClassName("cart-item");let t=0;for(let n=0;n<e.length;n++){const a=e[n],s=a.querySelector(".product-details .quantity-input"),c=a.querySelector(".product-details h4");t+=parseInt(s.value)*parseFloat(c.dataset.price)}document.getElementById("total-price").innerText="TOTAL: UGX "+t.toFixed(2),console.log("Updated Total:",t)}function s(e){const t=document.getElementById("cart-count"),n=parseInt(t.innerText)||0;t.innerText=n+e}function c(e){const t=document.getElementById("message-container");t.innerText=`${e} added to cart`,t.style.display="block",setTimeout((()=>{t.style.display="none"}),3e3)}I.addEventListener("click",(()=>{const e=document.getElementById("cart-container");e.style.display="block";document.getElementById("close-cart-btn").style.display="none",setTimeout((()=>{e.style.opacity="1"}),10),n(d),a()})),i.appendChild(I);const S=document.getElementById("open-cart-btn"),U=document.getElementById("close-cart-btn"),F=document.getElementById("cart-content"),G=document.getElementById("overlay4");F.style.display="none";const X=document.body;function o(){return 0===document.getElementsByClassName("cart-item").length}S.addEventListener("click",(()=>{if(o())return F.style.display="none",void c("Cart is Empty! Nothing is");G.style.display="block",F.style.display="block",S.style.display="none",U.style.display="inline-block",X.classList.add("no-scroll"),setTimeout((()=>{G.style.opacity="1",F.style.opacity="1"}),10)})),U.addEventListener("click",(()=>{G.style.opacity="0",F.style.opacity="0",setTimeout((()=>{F.style.display="none",U.style.display="none",S.style.display="inline-block",G.style.display="none",X.classList.remove("no-scroll")}),300)})),isInViewportNew(i)&&t.appendChild(i)}loader.style.display="none"}function isInViewportNew(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function handleScrollNew(){const e=document.getElementById("products-list");document.querySelectorAll(".card1").forEach((t=>{isInViewportNew(t)&&!e.contains(t)&&e.appendChild(t)}))}function loadCardsWithRetryAndBackoff(e,t,n=5,a=3e3,s=16e3){!function n(a){setTimeout((()=>{get(e).then((e=>{const c=e.val();if(c)t(c);else{n(Math.min(2*a,s))}})).catch((()=>{n(Math.min(2*a,s))}))}),a)}(a)}window.addEventListener("scroll",handleNewScreenScroll),loadNewScreenCardsWithRetriesAndBackoff(),window.addEventListener("scroll",handleGradeBScreenScroll),loadGradeBScreenCardsWithRetriesAndBackoff(),window.addEventListener("scroll",handlePortScroll),loadPortCardsWithRetriesAndBackoff(),window.addEventListener("scroll",handleScrollTouches),loadTouchesCardsWithRetriesAndBackoff(),window.addEventListener("scroll",handleScroll),loadCardsWithRetriesAndBackoff(accessoriesRef,loadCards),window.addEventListener("scroll",handleScrollNew),loadCardsWithRetryAndBackoff(electronicsRef,loadCardsNew);const slider=document.querySelector(".image-slider"),images=slider.querySelectorAll("img"),interval=3e3;let index=0;setInterval((()=>{images[index].classList.remove("active"),index=(index+1)%images.length,images[index].classList.add("active")}),3e3);const backToTopBtn=document.getElementById("backToTopBtn");window.addEventListener("scroll",(()=>{document.body.scrollTop>20||document.documentElement.scrollTop>20?backToTopBtn.style.display="block":backToTopBtn.style.display="none"})),backToTopBtn.addEventListener("click",(()=>{window.scrollTo({top:0,behavior:"smooth"})}));const filterButtons=document.querySelectorAll(".filter-btn");function filterProducts(e){const t=document.querySelectorAll("#products-list .card1");let n=!1;t.forEach((t=>{const a=t.querySelector("h2").innerText.toLowerCase();e.toLowerCase().split(",").some((e=>a.includes(e.trim())))||"all"===e?(t.style.display="block",n=!0):t.style.display="none"})),n?hideNoResultsMessage():showNoResultsMessage()}function showNoResultsMessage(){document.getElementById("no-results-container").style.display="block"}function hideNoResultsMessage(){document.getElementById("no-results-container").style.display="none"}filterButtons.forEach((e=>{e.addEventListener("click",(function(){filterButtons.forEach((e=>{e.classList.remove("active")})),this.classList.add("active");filterProducts(this.getAttribute("data-filter"))}))}));